// <!--GAMFC--> version base on commit 5d79e163f613d5fc04c318ac6bb152a103ca790c, time is 2025-10-25 01:23:15 UTC<!--We are all REvil-->
// @ts-ignore

import{connect}from'cloudflare:sockets';const Config={'userID':'d342d11e-d424-4583-b36e-524ab1f0afa4','proxyIPs':['nima.nscl.ir:443'],'scamalytics':{'username':'revilseptember','apiKey':'b2fc368184deb3d8ac914bd776b8215fe899dd8fef69fbaba77511acfbdeca0d','baseUrl':'https://api12.scamalytics.com/v3/'},'socks5':{'enabled':![],'relayMode':![],'address':''},'fromEnv'(a){const b=a['PROXYIP']||this['proxyIPs'][Math['floor'](Math['random']()*this['proxyIPs']['length'])],[c,d='443']=b['split'](':');return{'userID':a['UUID']||this['userID'],'proxyIP':c,'proxyPort':d,'proxyAddress':b,'scamalytics':{'username':a['SCAMALYTICS_USERNAME']||this['scamalytics']['username'],'apiKey':a['SCAMALYTICS_API_KEY']||this['scamalytics']['apiKey'],'baseUrl':a['SCAMALYTICS_BASEURL']||this['scamalytics']['baseUrl']},'socks5':{'enabled':!!a['SOCKS5'],'relayMode':a['SOCKS5_RELAY']==='true'||this['socks5']['relayMode'],'address':a['SOCKS5']||this['socks5']['address']}};}},CONST={'ED_PARAMS':{'ed':0xa00,'eh':'Sec-WebSocket-Protocol'},'VLESS_PROTOCOL':'vless','WS_READY_STATE_OPEN':0x1,'WS_READY_STATE_CLOSING':0x2};function generateUUID(){return crypto['randomUUID']();}function isValidUUID(a){if(typeof a!=='string')return![];const b=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return b['test'](a);}function isExpired(a,b){if(!a||!b)return!![];const c=b['includes'](':')&&b['split'](':')['length']===0x2?b+':00':b,d=c['split']('.')[0x0],e=new Date(a+'T'+d+'Z');return e<=new Date()||isNaN(e);}function formatBytes(a){if(a===0x0)return'0\x20Bytes';const b=0x400,c=['Bytes','KB','MB','GB','TB','PB','EB','ZB','YB'],d=Math['floor'](Math['log'](a)/Math['log'](b));return parseFloat((a/Math['pow'](b,d))['toFixed'](0x2))+'\x20'+c[d];}async function getUserData(a,b,c){if(!isValidUUID(b))return null;if(!a['DB']||!a['USER_KV'])return console['error']('D1\x20or\x20KV\x20bindings\x20missing'),null;const d='user:'+b;try{const h=await a['USER_KV']['get'](d,'json');if(h&&h['uuid'])return h;}catch(i){console['error']('Failed\x20to\x20parse\x20cached\x20data\x20for\x20'+b,i);}const f=await a['DB']['prepare']('SELECT\x20*\x20FROM\x20users\x20WHERE\x20uuid\x20=\x20?')['bind'](b)['first']();if(!f)return null;const g=a['USER_KV']['put'](d,JSON['stringify'](f),{'expirationTtl':0xe10});return c?c['waitUntil'](g):await g,f;}async function updateUsage(a,b,c,d){if(c<=0x0||!b)return;try{const e=Math['round'](c),f=a['DB']['prepare']('UPDATE\x20users\x20SET\x20traffic_used\x20=\x20traffic_used\x20+\x20?\x20WHERE\x20uuid\x20=\x20?')['bind'](e,b)['run'](),g=a['USER_KV']['delete']('user:'+b);d?d['waitUntil'](Promise['all']([f,g])):await Promise['all']([f,g]);}catch(h){console['error']('Failed\x20to\x20update\x20usage\x20for\x20'+b+':',h);}}const byteToHex=Array['from']({'length':0x100},(a,b)=>(b+0x100)['toString'](0x10)['slice'](0x1));function unsafeStringify(a,b=0x0){return(byteToHex[a[b]]+byteToHex[a[b+0x1]]+byteToHex[a[b+0x2]]+byteToHex[a[b+0x3]]+'-'+byteToHex[a[b+0x4]]+byteToHex[a[b+0x5]]+'-'+byteToHex[a[b+0x6]]+byteToHex[a[b+0x7]]+'-'+byteToHex[a[b+0x8]]+byteToHex[a[b+0x9]]+'-'+byteToHex[a[b+0xa]]+byteToHex[a[b+0xb]]+byteToHex[a[b+0xc]]+byteToHex[a[b+0xd]]+byteToHex[a[b+0xe]]+byteToHex[a[b+0xf]])['toLowerCase']();}function stringify(a,b=0x0){const c=unsafeStringify(a,b);if(!isValidUUID(c))throw new TypeError('Stringified\x20UUID\x20is\x20invalid');return c;}function generateRandomPath(a=0xc,b=''){const c='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';let d='';for(let e=0x0;e<a;e++){d+=c['charAt'](Math['floor'](Math['random']()*c['length']));}return'/'+d+(b?'?'+b:'');}const CORE_PRESETS={'xray':{'tls':{'path':()=>generateRandomPath(0xc,'ed=2048'),'security':'tls','fp':'chrome','alpn':'http/1.1','extra':{}},'tcp':{'path':()=>generateRandomPath(0xc,'ed=2048'),'security':'none','fp':'chrome','extra':{}}},'sb':{'tls':{'path':()=>generateRandomPath(0x12),'security':'tls','fp':'firefox','alpn':'h3','extra':CONST['ED_PARAMS']},'tcp':{'path':()=>generateRandomPath(0x12),'security':'none','fp':'firefox','extra':CONST['ED_PARAMS']}}};function makeName(a,b){return a+'-'+b['toUpperCase']();}function createVlessLink({userID:a,address:b,port:c,host:d,path:e,security:f,sni:g,fp:h,alpn:i,extra:extra={},name:j}){const l=new URLSearchParams({'type':'ws','host':d,'path':e});if(f)l['set']('security',f);if(g)l['set']('sni',g);if(h)l['set']('fp',h);if(i)l['set']('alpn',i);for(const [m,n]of Object['entries'](extra))l['set'](m,n);return'vless://'+a+'@'+b+':'+c+'?'+l['toString']()+'#'+encodeURIComponent(j);}function buildLink({core:a,proto:b,userID:c,hostName:d,address:e,port:f,tag:g}){const h=CORE_PRESETS[a][b];return createVlessLink({'userID':c,'address':e,'port':f,'host':d,'path':h['path'](),'security':h['security'],'sni':h['security']==='tls'?d:undefined,'fp':h['fp'],'alpn':h['alpn'],'extra':h['extra'],'name':makeName(g,b)});}const pick=a=>a[Math['floor'](Math['random']()*a['length'])];async function handleIpSubscription(a,b,c){const d=[c,'creativecommons.org','www.speedtest.net','sky.rethinkdns.com','cfip.1323123.xyz','go.inmobi.com','www.visa.com','cf.090227.xyz','cdnjs.com','zula.ir'],f=[0x1bb,0x20fb,0x805,0x823,0x827,0x830],g=[0x50,0x1f90,0x22b0,0x804,0x822,0x826,0x82f];let h=[];const i=c['endsWith']('.pages.dev');d['forEach']((j,k)=>{h['push'](buildLink({'core':a,'proto':'tls','userID':b,'hostName':c,'address':j,'port':pick(f),'tag':'D'+(k+0x1)})),!i&&h['push'](buildLink({'core':a,'proto':'tcp','userID':b,'hostName':c,'address':j,'port':pick(g),'tag':'D'+(k+0x1)}));});try{const j=await fetch('https://raw.githubusercontent.com/NiREvil/vless/refs/heads/main/Cloudflare-IPs.json');if(j['ok']){const k=await j['json'](),l=[...k['ipv4']??[],...k['ipv6']??[]]['slice'](0x0,0x14)['map'](m=>m['ip']);l['forEach']((m,n)=>{const o=m['includes'](':')?'['+m+']':m;h['push'](buildLink({'core':a,'proto':'tls','userID':b,'hostName':c,'address':o,'port':pick(f),'tag':'IP'+(n+0x1)})),!i&&h['push'](buildLink({'core':a,'proto':'tcp','userID':b,'hostName':c,'address':o,'port':pick(g),'tag':'IP'+(n+0x1)}));});}}catch(m){console['error']('Fetch\x20IP\x20list\x20failed',m);}return new Response(btoa(h['join']('\x0a')),{'headers':{'Content-Type':'text/plain;charset=utf-8'}});}const adminLoginHTML='<!DOCTYPE\x20html>\x0a<html\x20lang=\x22en\x22>\x0a<head>\x0a\x20\x20\x20\x20<meta\x20charset=\x22UTF-8\x22>\x0a\x20\x20\x20\x20<meta\x20name=\x22viewport\x22\x20content=\x22width=device-width,\x20initial-scale=1.0\x22>\x0a\x20\x20\x20\x20<title>Admin\x20Login</title>\x0a\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20display:\x20flex;\x20justify-content:\x20center;\x20align-items:\x20center;\x20height:\x20100vh;\x20margin:\x200;\x20background-color:\x20#121212;\x20font-family:\x20-apple-system,\x20BlinkMacSystemFont,\x20\x22Segoe\x20UI\x22,\x20Roboto,\x20Helvetica,\x20Arial,\x20sans-serif;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.login-container\x20{\x20background-color:\x20#1e1e1e;\x20padding:\x2040px;\x20border-radius:\x2012px;\x20box-shadow:\x200\x204px\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x20text-align:\x20center;\x20width:\x20320px;\x20border:\x201px\x20solid\x20#333;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20h1\x20{\x20color:\x20#ffffff;\x20margin-bottom:\x2024px;\x20font-weight:\x20500;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20form\x20{\x20display:\x20flex;\x20flex-direction:\x20column;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20input[type=\x22password\x22]\x20{\x20background-color:\x20#2c2c2c;\x20border:\x201px\x20solid\x20#444;\x20color:\x20#ffffff;\x20padding:\x2012px;\x20border-radius:\x208px;\x20margin-bottom:\x2020px;\x20font-size:\x2016px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20input[type=\x22password\x22]:focus\x20{\x20outline:\x20none;\x20border-color:\x20#007aff;\x20box-shadow:\x200\x200\x200\x202px\x20rgba(0,\x20122,\x20255,\x200.3);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20button\x20{\x20background-color:\x20#007aff;\x20color:\x20white;\x20border:\x20none;\x20padding:\x2012px;\x20border-radius:\x208px;\x20font-size:\x2016px;\x20font-weight:\x20600;\x20cursor:\x20pointer;\x20transition:\x20background-color\x200.2s;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20button:hover\x20{\x20background-color:\x20#005ecb;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.error\x20{\x20color:\x20#ff3b30;\x20margin-top:\x2015px;\x20font-size:\x2014px;\x20}\x0a\x20\x20\x20\x20</style>\x0a</head>\x0a<body>\x0a\x20\x20\x20\x20<div\x20class=\x22login-container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h1>Admin\x20Login</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<form\x20method=\x22POST\x22\x20action=\x22/admin\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22password\x22\x20name=\x22password\x22\x20placeholder=\x22Enter\x20admin\x20password\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22>Login</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20</div>\x0a</body>\x0a</html>',adminPanelHTML='<!DOCTYPE\x20html>\x0a<html\x20lang=\x22en\x22>\x0a<head>\x0a\x20\x20\x20\x20<meta\x20charset=\x22UTF-8\x22>\x0a\x20\x20\x20\x20<meta\x20name=\x22viewport\x22\x20content=\x22width=device-width,\x20initial-scale=1.0\x22>\x0a\x20\x20\x20\x20<title>Admin\x20Dashboard</title>\x0a\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20:root\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20--bg-main:\x20#111827;\x20--bg-card:\x20#1F2937;\x20--border:\x20#374151;\x20--text-primary:\x20#F9FAFB;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20--text-secondary:\x20#9CA3AF;\x20--accent:\x20#3B82F6;\x20--accent-hover:\x20#2563EB;\x20--danger:\x20#EF4444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20--danger-hover:\x20#DC2626;\x20--success:\x20#22C55E;\x20--expired:\x20#F59E0B;\x20--btn-secondary-bg:\x20#4B5563;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20margin:\x200;\x20font-family:\x20-apple-system,\x20BlinkMacSystemFont,\x20\x22Segoe\x20UI\x22,\x20Roboto,\x20sans-serif;\x20background-color:\x20var(--bg-main);\x20color:\x20var(--text-primary);\x20font-size:\x2014px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x201200px;\x20margin:\x2040px\x20auto;\x20padding:\x200\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20h1,\x20h2\x20{\x20font-weight:\x20600;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20h1\x20{\x20font-size:\x2024px;\x20margin-bottom:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20h2\x20{\x20font-size:\x2018px;\x20border-bottom:\x201px\x20solid\x20var(--border);\x20padding-bottom:\x2010px;\x20margin-bottom:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.card\x20{\x20background-color:\x20var(--bg-card);\x20border-radius:\x208px;\x20padding:\x2024px;\x20border:\x201px\x20solid\x20var(--border);\x20box-shadow:\x200\x204px\x206px\x20rgba(0,0,0,0.1);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.dashboard-stats\x20{\x20display:\x20grid;\x20grid-template-columns:\x20repeat(auto-fit,\x20minmax(200px,\x201fr));\x20gap:\x2016px;\x20margin-bottom:\x2024px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.stat-card\x20{\x20background:\x20#1F2937;\x20padding:\x2016px;\x20border-radius:\x208px;\x20text-align:\x20center;\x20border:\x201px\x20solid\x20var(--border);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.stat-value\x20{\x20font-size:\x2024px;\x20font-weight:\x20600;\x20color:\x20var(--accent);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.stat-label\x20{\x20font-size:\x2012px;\x20color:\x20var(--text-secondary);\x20text-transform:\x20uppercase;\x20margin-top:\x204px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.form-grid\x20{\x20display:\x20grid;\x20grid-template-columns:\x20repeat(auto-fit,\x20minmax(200px,\x201fr));\x20gap:\x2016px;\x20align-items:\x20flex-end;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.form-group\x20{\x20display:\x20flex;\x20flex-direction:\x20column;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.form-group\x20label\x20{\x20margin-bottom:\x208px;\x20font-weight:\x20500;\x20color:\x20var(--text-secondary);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.form-group\x20.input-group\x20{\x20display:\x20flex;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20input[type=\x22text\x22],\x20input[type=\x22date\x22],\x20input[type=\x22time\x22],\x20input[type=\x22number\x22],\x20select\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x20box-sizing:\x20border-box;\x20background-color:\x20#374151;\x20border:\x201px\x20solid\x20#4B5563;\x20color:\x20var(--text-primary);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px;\x20border-radius:\x206px;\x20font-size:\x2014px;\x20transition:\x20border-color\x200.2s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20input:focus,\x20select:focus\x20{\x20outline:\x20none;\x20border-color:\x20var(--accent);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.label-note\x20{\x20font-size:\x2011px;\x20color:\x20var(--text-secondary);\x20margin-top:\x204px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.btn\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2016px;\x20border:\x20none;\x20border-radius:\x206px;\x20font-weight:\x20600;\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.2s,\x20transform\x200.1s;\x20display:\x20inline-flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20gap:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.btn:active\x20{\x20transform:\x20scale(0.98);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.btn-primary\x20{\x20background-color:\x20var(--accent);\x20color:\x20white;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.btn-primary:hover\x20{\x20background-color:\x20var(--accent-hover);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.btn-secondary\x20{\x20background-color:\x20var(--btn-secondary-bg);\x20color:\x20white;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.btn-secondary:hover\x20{\x20background-color:\x20#6B7280;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.btn-danger\x20{\x20background-color:\x20var(--danger);\x20color:\x20white;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.btn-danger:hover\x20{\x20background-color:\x20var(--danger-hover);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.input-group\x20.btn-secondary\x20{\x20border-top-left-radius:\x200;\x20border-bottom-left-radius:\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.input-group\x20input\x20{\x20border-top-right-radius:\x200;\x20border-bottom-right-radius:\x200;\x20border-right:\x20none;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.input-group\x20select\x20{\x20border-top-left-radius:\x200;\x20border-bottom-left-radius:\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.search-input\x20{\x20width:\x20100%;\x20margin-bottom:\x2016px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20table\x20{\x20width:\x20100%;\x20border-collapse:\x20collapse;\x20margin-top:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20th,\x20td\x20{\x20padding:\x2012px\x2016px;\x20text-align:\x20left;\x20border-bottom:\x201px\x20solid\x20var(--border);\x20white-space:\x20nowrap;\x20overflow:\x20hidden;\x20text-overflow:\x20ellipsis;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20th\x20{\x20color:\x20var(--text-secondary);\x20font-weight:\x20600;\x20font-size:\x2012px;\x20text-transform:\x20uppercase;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20td\x20{\x20color:\x20var(--text-primary);\x20font-family:\x20\x22SF\x20Mono\x22,\x20\x22Fira\x20Code\x22,\x20monospace;\x20font-size:\x2013px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.status-badge\x20{\x20padding:\x204px\x208px;\x20border-radius:\x2012px;\x20font-size:\x2012px;\x20font-weight:\x20600;\x20display:\x20inline-block;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.status-active\x20{\x20background-color:\x20var(--success);\x20color:\x20#064E3B;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.status-expired\x20{\x20background-color:\x20var(--expired);\x20color:\x20#78350F;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.actions-cell\x20.btn\x20{\x20padding:\x206px\x2010px;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20#toast\x20{\x20position:\x20fixed;\x20top:\x2020px;\x20right:\x2020px;\x20background-color:\x20var(--bg-card);\x20color:\x20white;\x20padding:\x2015px\x2020px;\x20border-radius:\x208px;\x20z-index:\x201001;\x20display:\x20none;\x20border:\x201px\x20solid\x20var(--border);\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.3);\x20opacity:\x200;\x20transition:\x20opacity\x200.3s,\x20transform\x200.3s;\x20transform:\x20translateY(-20px);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20#toast.show\x20{\x20display:\x20block;\x20opacity:\x201;\x20transform:\x20translateY(0);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20#toast.error\x20{\x20border-left:\x205px\x20solid\x20var(--danger);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20#toast.success\x20{\x20border-left:\x205px\x20solid\x20var(--success);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.uuid-cell\x20{\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20space-between;\x20gap:\x208px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.actions-cell\x20{\x20display:\x20flex;\x20gap:\x208px;\x20justify-content:\x20center;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.time-display\x20{\x20display:\x20flex;\x20flex-direction:\x20column;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.time-local\x20{\x20font-weight:\x20600;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.time-utc,\x20.time-relative\x20{\x20font-size:\x2011px;\x20color:\x20var(--text-secondary);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.modal-overlay\x20{\x20position:\x20fixed;\x20top:\x200;\x20left:\x200;\x20width:\x20100%;\x20height:\x20100%;\x20background-color:\x20rgba(0,0,0,0.7);\x20z-index:\x201000;\x20display:\x20flex;\x20justify-content:\x20center;\x20align-items:\x20center;\x20opacity:\x200;\x20visibility:\x20hidden;\x20transition:\x20opacity\x200.3s,\x20visibility\x200.3s;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.modal-overlay.show\x20{\x20opacity:\x201;\x20visibility:\x20visible;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.modal-content\x20{\x20background-color:\x20var(--bg-card);\x20padding:\x2030px;\x20border-radius:\x2012px;\x20box-shadow:\x200\x205px\x2025px\x20rgba(0,0,0,0.4);\x20width:\x2090%;\x20max-width:\x20500px;\x20transform:\x20scale(0.9);\x20transition:\x20transform\x200.3s;\x20border:\x201px\x20solid\x20var(--border);\x20max-height:\x2090vh;\x20overflow-y:\x20auto;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.modal-overlay.show\x20.modal-content\x20{\x20transform:\x20scale(1);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.modal-header\x20{\x20display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x20border-bottom:\x201px\x20solid\x20var(--border);\x20padding-bottom:\x2015px;\x20margin-bottom:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.modal-header\x20h2\x20{\x20margin:\x200;\x20border:\x20none;\x20font-size:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.modal-close-btn\x20{\x20background:\x20none;\x20border:\x20none;\x20color:\x20var(--text-secondary);\x20font-size:\x2024px;\x20cursor:\x20pointer;\x20line-height:\x201;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.modal-footer\x20{\x20display:\x20flex;\x20justify-content:\x20flex-end;\x20gap:\x2012px;\x20margin-top:\x2025px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.time-quick-set-group\x20{\x20display:\x20flex;\x20gap:\x208px;\x20margin-top:\x2010px;\x20flex-wrap:\x20wrap;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.btn-outline-secondary\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20transparent;\x20border:\x201px\x20solid\x20var(--btn-secondary-bg);\x20color:\x20var(--text-secondary);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x206px\x2010px;\x20font-size:\x2012px;\x20font-weight:\x20500;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.btn-outline-secondary:hover\x20{\x20background-color:\x20var(--btn-secondary-bg);\x20color:\x20white;\x20border-color:\x20var(--btn-secondary-bg);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.checkbox\x20{\x20width:\x2016px;\x20height:\x2016px;\x20margin-right:\x2010px;\x20cursor:\x20pointer;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20.select-all\x20{\x20cursor:\x20pointer;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20@media\x20(max-width:\x20768px)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.dashboard-stats\x20{\x20grid-template-columns:\x20repeat(auto-fit,\x20minmax(150px,\x201fr));\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20table\x20{\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20th,\x20td\x20{\x20padding:\x208px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20</style>\x0a</head>\x0a<body>\x0a\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h1>Admin\x20Dashboard</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22dashboard-stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-value\x22\x20id=\x22total-users\x22>0</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-label\x22>Total\x20Users</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-value\x22\x20id=\x22active-users\x22>0</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-label\x22>Active\x20Users</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-value\x22\x20id=\x22expired-users\x22>0</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-label\x22>Expired\x20Users</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-value\x22\x20id=\x22total-traffic\x22>0\x20KB</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22stat-label\x22>Total\x20Traffic\x20Used</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Create\x20User</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22createUserForm\x22\x20class=\x22form-grid\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22\x20style=\x22grid-column:\x201\x20/\x20-1;\x22><label\x20for=\x22uuid\x22>UUID</label><div\x20class=\x22input-group\x22><input\x20type=\x22text\x22\x20id=\x22uuid\x22\x20required><button\x20type=\x22button\x22\x20id=\x22generateUUID\x22\x20class=\x22btn\x20btn-secondary\x22>Generate</button></div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22><label\x20for=\x22expiryDate\x22>Expiry\x20Date</label><input\x20type=\x22date\x22\x20id=\x22expiryDate\x22\x20required></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22expiryTime\x22>Expiry\x20Time\x20(Your\x20Local\x20Time)</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22time\x22\x20id=\x22expiryTime\x22\x20step=\x221\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22label-note\x22>Automatically\x20converted\x20to\x20UTC\x20on\x20save.</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22time-quick-set-group\x22\x20data-target-date=\x22expiryDate\x22\x20data-target-time=\x22expiryTime\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22btn\x20btn-outline-secondary\x22\x20data-amount=\x221\x22\x20data-unit=\x22hour\x22>+1\x20Hour</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22btn\x20btn-outline-secondary\x22\x20data-amount=\x221\x22\x20data-unit=\x22day\x22>+1\x20Day</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22btn\x20btn-outline-secondary\x22\x20data-amount=\x227\x22\x20data-unit=\x22day\x22>+1\x20Week</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22btn\x20btn-outline-secondary\x22\x20data-amount=\x221\x22\x20data-unit=\x22month\x22>+1\x20Month</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22><label\x20for=\x22notes\x22>Notes</label><input\x20type=\x22text\x22\x20id=\x22notes\x22\x20placeholder=\x22Optional\x20notes\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22><label\x20for=\x22dataLimit\x22>Data\x20Limit</label><div\x20class=\x22input-group\x22><input\x20type=\x22number\x22\x20id=\x22dataLimit\x22\x20min=\x220\x22\x20step=\x220.01\x22\x20placeholder=\x220\x22><select\x20id=\x22dataUnit\x22><option>KB</option><option>MB</option><option>GB</option><option>TB</option><option\x20value=\x22unlimited\x22\x20selected>Unlimited</option></select></div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22><label>&nbsp;</label><button\x20type=\x22submit\x22\x20class=\x22btn\x20btn-primary\x22>Create\x20User</button></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22card\x22\x20style=\x22margin-top:\x2030px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>User\x20List</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20id=\x22searchInput\x22\x20class=\x22search-input\x22\x20placeholder=\x22Search\x20by\x20UUID\x20or\x20Notes...\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22deleteSelected\x22\x20class=\x22btn\x20btn-danger\x22\x20style=\x22margin-bottom:\x2016px;\x22>Delete\x20Selected</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22overflow-x:\x20auto;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead><tr><th><input\x20type=\x22checkbox\x22\x20id=\x22selectAll\x22\x20class=\x22select-all\x20checkbox\x22></th><th>UUID</th><th>Created</th><th>Expiry\x20(Admin\x20Local)</th><th>Expiry\x20(Tehran)</th><th>Status</th><th>Notes</th><th>Data\x20Limit</th><th>Usage</th><th>Actions</th></tr></thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody\x20id=\x22userList\x22></tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<div\x20id=\x22toast\x22></div>\x0a\x20\x20\x20\x20<div\x20id=\x22editModal\x22\x20class=\x22modal-overlay\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Edit\x20User</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22modalCloseBtn\x22\x20class=\x22modal-close-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22editUserForm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20id=\x22editUuid\x22\x20name=\x22uuid\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22><label\x20for=\x22editExpiryDate\x22>Expiry\x20Date</label><input\x20type=\x22date\x22\x20id=\x22editExpiryDate\x22\x20name=\x22exp_date\x22\x20required></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22\x20style=\x22margin-top:\x2016px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22editExpiryTime\x22>Expiry\x20Time\x20(Your\x20Local\x20Time)</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22time\x22\x20id=\x22editExpiryTime\x22\x20name=\x22exp_time\x22\x20step=\x221\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22label-note\x22>Your\x20current\x20timezone\x20is\x20used\x20for\x20conversion.</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22time-quick-set-group\x22\x20data-target-date=\x22editExpiryDate\x22\x20data-target-time=\x22editExpiryTime\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22btn\x20btn-outline-secondary\x22\x20data-amount=\x221\x22\x20data-unit=\x22hour\x22>+1\x20Hour</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22btn\x20btn-outline-secondary\x22\x20data-amount=\x221\x22\x20data-unit=\x22day\x22>+1\x20Day</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22btn\x20btn-outline-secondary\x22\x20data-amount=\x227\x22\x20data-unit=\x22day\x22>+1\x20Week</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22btn\x20btn-outline-secondary\x22\x20data-amount=\x221\x22\x20data-unit=\x22month\x22>+1\x20Month</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22\x20style=\x22margin-top:\x2016px;\x22><label\x20for=\x22editNotes\x22>Notes</label><input\x20type=\x22text\x22\x20id=\x22editNotes\x22\x20name=\x22notes\x22\x20placeholder=\x22Optional\x20notes\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22\x20style=\x22margin-top:\x2016px;\x22><label\x20for=\x22editDataLimit\x22>Data\x20Limit</label><div\x20class=\x22input-group\x22><input\x20type=\x22number\x22\x20id=\x22editDataLimit\x22\x20min=\x220\x22\x20step=\x220.01\x22><select\x20id=\x22editDataUnit\x22><option>KB</option><option>MB</option><option>GB</option><option>TB</option><option\x20value=\x22unlimited\x22>Unlimited</option></select></div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22\x20style=\x22margin-top:\x2016px;\x22><label><input\x20type=\x22checkbox\x22\x20id=\x22resetTraffic\x22\x20name=\x22reset_traffic\x22>\x20Reset\x20Traffic\x20Usage</label></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20id=\x22modalCancelBtn\x22\x20class=\x22btn\x20btn-secondary\x22>Cancel</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22btn\x20btn-primary\x22>Save\x20Changes</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20<script>\x0a\x20\x20\x20\x20\x20\x20\x20\x20document.addEventListener(\x27DOMContentLoaded\x27,\x20()\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20API_BASE\x20=\x20\x27/admin/api\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20let\x20allUsers\x20=\x20[];\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20userList\x20=\x20document.getElementById(\x27userList\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20createUserForm\x20=\x20document.getElementById(\x27createUserForm\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20generateUUIDBtn\x20=\x20document.getElementById(\x27generateUUID\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20uuidInput\x20=\x20document.getElementById(\x27uuid\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20toast\x20=\x20document.getElementById(\x27toast\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20editModal\x20=\x20document.getElementById(\x27editModal\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20editUserForm\x20=\x20document.getElementById(\x27editUserForm\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20searchInput\x20=\x20document.getElementById(\x27searchInput\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20selectAll\x20=\x20document.getElementById(\x27selectAll\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20deleteSelected\x20=\x20document.getElementById(\x27deleteSelected\x27);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20function\x20formatBytes(bytes)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(bytes\x20===\x200)\x20return\x20\x270\x20Bytes\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20k\x20=\x201024;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20sizes\x20=\x20[\x27Bytes\x27,\x20\x27KB\x27,\x20\x27MB\x27,\x20\x27GB\x27,\x20\x27TB\x27,\x20\x27PB\x27,\x20\x27EB\x27,\x20\x27ZB\x27,\x20\x27YB\x27];\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20i\x20=\x20Math.floor(Math.log(bytes)\x20/\x20Math.log(k));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20parseFloat((bytes\x20/\x20Math.pow(k,\x20i)).toFixed(2))\x20+\x20\x27\x20\x27\x20+\x20sizes[i];\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20function\x20showToast(message,\x20isError\x20=\x20false)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20toast.textContent\x20=\x20message;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20toast.className\x20=\x20isError\x20?\x20\x27error\x27\x20:\x20\x27success\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20toast.classList.add(\x27show\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20setTimeout(()\x20=>\x20{\x20toast.classList.remove(\x27show\x27);\x20},\x203000);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20api\x20=\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20get:\x20(endpoint)\x20=>\x20fetch(`${API_BASE}${endpoint}`,\x20{\x20credentials:\x20\x27include\x27\x20}).then(handleResponse),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20post:\x20(endpoint,\x20body)\x20=>\x20fetch(`${API_BASE}${endpoint}`,\x20{\x20method:\x20\x27POST\x27,\x20credentials:\x20\x27include\x27,\x20headers:\x20{\x27Content-Type\x27:\x20\x27application/json\x27},\x20body:\x20JSON.stringify(body)\x20}).then(handleResponse),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20put:\x20(endpoint,\x20body)\x20=>\x20fetch(`${API_BASE}${endpoint}`,\x20{\x20method:\x20\x27PUT\x27,\x20credentials:\x20\x27include\x27,\x20headers:\x20{\x27Content-Type\x27:\x20\x27application/json\x27},\x20body:\x20JSON.stringify(body)\x20}).then(handleResponse),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20delete:\x20(endpoint)\x20=>\x20fetch(`${API_BASE}${endpoint}`,\x20{\x20method:\x20\x27DELETE\x27,\x20credentials:\x20\x27include\x27\x20}).then(handleResponse),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20};\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20async\x20function\x20handleResponse(response)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(!response.ok)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20errorData\x20=\x20await\x20response.json().catch(()\x20=>\x20({\x20error:\x20\x27An\x20unknown\x20error\x20occurred.\x27\x20}));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20throw\x20new\x20Error(errorData.error\x20||\x20`Request\x20failed\x20with\x20status\x20${response.status}`);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20response.status\x20===\x20204\x20?\x20null\x20:\x20response.json();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20pad\x20=\x20(num)\x20=>\x20num.toString().padStart(2,\x20\x270\x27);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20function\x20localToUTC(dateStr,\x20timeStr)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(!dateStr\x20||\x20!timeStr)\x20return\x20{\x20utcDate:\x20\x27\x27,\x20utcTime:\x20\x27\x27\x20};\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20localDateTime\x20=\x20new\x20Date(`${dateStr}T${timeStr}`);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(isNaN(localDateTime))\x20return\x20{\x20utcDate:\x20\x27\x27,\x20utcTime:\x20\x27\x27\x20};\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20year\x20=\x20localDateTime.getUTCFullYear();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20month\x20=\x20pad(localDateTime.getUTCMonth()\x20+\x201);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20day\x20=\x20pad(localDateTime.getUTCDate());\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20hours\x20=\x20pad(localDateTime.getUTCHours());\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20minutes\x20=\x20pad(localDateTime.getUTCMinutes());\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20seconds\x20=\x20pad(localDateTime.getUTCSeconds());\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20utcDate:\x20`${year}-${month}-${day}`,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20utcTime:\x20`${hours}:${minutes}:${seconds}`\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20};\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20function\x20utcToLocal(utcDateStr,\x20utcTimeStr)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(!utcDateStr\x20||\x20!utcTimeStr)\x20return\x20{\x20localDate:\x20\x27\x27,\x20localTime:\x20\x27\x27\x20};\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20utcDateTime\x20=\x20new\x20Date(`${utcDateStr}T${utcTimeStr}Z`);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(isNaN(utcDateTime))\x20return\x20{\x20localDate:\x20\x27\x27,\x20localTime:\x20\x27\x27\x20};\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20year\x20=\x20utcDateTime.getFullYear();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20month\x20=\x20pad(utcDateTime.getMonth()\x20+\x201);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20day\x20=\x20pad(utcDateTime.getDate());\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20hours\x20=\x20pad(utcDateTime.getHours());\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20minutes\x20=\x20pad(utcDateTime.getMinutes());\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20seconds\x20=\x20pad(utcDateTime.getSeconds());\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20localDate:\x20`${year}-${month}-${day}`,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20localTime:\x20`${hours}:${minutes}:${seconds}`\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20};\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20function\x20addExpiryTime(dateInputId,\x20timeInputId,\x20amount,\x20unit)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20dateInput\x20=\x20document.getElementById(dateInputId);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20timeInput\x20=\x20document.getElementById(timeInputId);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20let\x20date\x20=\x20new\x20Date(`${dateInput.value}T${timeInput.value\x20||\x20\x2700:00:00\x27}`);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(isNaN(date.getTime()))\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20date\x20=\x20new\x20Date();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(unit\x20===\x20\x27hour\x27)\x20date.setHours(date.getHours()\x20+\x20amount);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20else\x20if\x20(unit\x20===\x20\x27day\x27)\x20date.setDate(date.getDate()\x20+\x20amount);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20else\x20if\x20(unit\x20===\x20\x27month\x27)\x20date.setMonth(date.getMonth()\x20+\x20amount);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20year\x20=\x20date.getFullYear();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20month\x20=\x20pad(date.getMonth()\x20+\x201);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20day\x20=\x20pad(date.getDate());\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20hours\x20=\x20pad(date.getHours());\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20minutes\x20=\x20pad(date.getMinutes());\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20seconds\x20=\x20pad(date.getSeconds());\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20dateInput.value\x20=\x20`${year}-${month}-${day}`;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20timeInput.value\x20=\x20`${hours}:${minutes}:${seconds}`;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.body.addEventListener(\x27click\x27,\x20(e)\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20target\x20=\x20e.target.closest(\x27.time-quick-set-group\x20button\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(!target)\x20return;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20group\x20=\x20target.closest(\x27.time-quick-set-group\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20addExpiryTime(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20group.dataset.targetDate,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20group.dataset.targetTime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20parseInt(target.dataset.amount,\x2010),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20target.dataset.unit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20function\x20formatExpiryDateTime(expDateStr,\x20expTimeStr)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20expiryUTC\x20=\x20new\x20Date(`${expDateStr}T${expTimeStr}Z`);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(isNaN(expiryUTC))\x20return\x20{\x20local:\x20\x27Invalid\x20Date\x27,\x20utc:\x20\x27\x27,\x20relative:\x20\x27\x27,\x20tehran:\x20\x27\x27,\x20isExpired:\x20true\x20};\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20now\x20=\x20new\x20Date();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20isExpired\x20=\x20expiryUTC\x20<\x20now;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20commonOptions\x20=\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20year:\x20\x27numeric\x27,\x20month:\x20\x272-digit\x27,\x20day:\x20\x272-digit\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20hour:\x20\x272-digit\x27,\x20minute:\x20\x272-digit\x27,\x20second:\x20\x272-digit\x27,\x20hour12:\x20false,\x20timeZoneName:\x20\x27short\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20};\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20localTime\x20=\x20expiryUTC.toLocaleString(undefined,\x20commonOptions);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20tehranTime\x20=\x20expiryUTC.toLocaleString(\x27en-US\x27,\x20{\x20...commonOptions,\x20timeZone:\x20\x27Asia/Tehran\x27\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20utcTime\x20=\x20expiryUTC.toISOString().replace(\x27T\x27,\x20\x27\x20\x27).substring(0,\x2019)\x20+\x20\x27\x20UTC\x27;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20rtf\x20=\x20new\x20Intl.RelativeTimeFormat(\x27en\x27,\x20{\x20numeric:\x20\x27auto\x27\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20diffSeconds\x20=\x20(expiryUTC.getTime()\x20-\x20now.getTime())\x20/\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20let\x20relativeTime\x20=\x20\x27\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(Math.abs(diffSeconds)\x20<\x2060)\x20relativeTime\x20=\x20rtf.format(Math.round(diffSeconds),\x20\x27second\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20else\x20if\x20(Math.abs(diffSeconds)\x20<\x203600)\x20relativeTime\x20=\x20rtf.format(Math.round(diffSeconds\x20/\x2060),\x20\x27minute\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20else\x20if\x20(Math.abs(diffSeconds)\x20<\x2086400)\x20relativeTime\x20=\x20rtf.format(Math.round(diffSeconds\x20/\x203600),\x20\x27hour\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20else\x20relativeTime\x20=\x20rtf.format(Math.round(diffSeconds\x20/\x2086400),\x20\x27day\x27);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20{\x20local:\x20localTime,\x20tehran:\x20tehranTime,\x20utc:\x20utcTime,\x20relative:\x20relativeTime,\x20isExpired\x20};\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20async\x20function\x20fetchStats()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20stats\x20=\x20await\x20api.get(\x27/stats\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27total-users\x27).textContent\x20=\x20stats.total_users;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27active-users\x27).textContent\x20=\x20stats.active_users;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27expired-users\x27).textContent\x20=\x20stats.expired_users;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27total-traffic\x27).textContent\x20=\x20formatBytes(stats.total_traffic);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x20showToast(error.message,\x20true);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20function\x20renderUsers(usersToRender\x20=\x20allUsers)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20userList.innerHTML\x20=\x20\x27\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(usersToRender.length\x20===\x200)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20userList.innerHTML\x20=\x20\x27<tr><td\x20colspan=\x2210\x22\x20style=\x22text-align:center;\x22>No\x20users\x20found.</td></tr>\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20usersToRender.forEach(user\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20expiry\x20=\x20formatExpiryDateTime(user.expiration_date,\x20user.expiration_time);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20row\x20=\x20document.createElement(\x27tr\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20row.innerHTML\x20=\x20`\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22checkbox\x22\x20class=\x22user-checkbox\x20checkbox\x22\x20data-uuid=\x22${user.uuid}\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><div\x20class=\x22uuid-cell\x22\x20title=\x22${user.uuid}\x22>${user.uuid.substring(0,\x208)}...</div></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>${new\x20Date(user.created_at).toLocaleString()}</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22time-display\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22time-local\x22\x20title=\x22Your\x20Local\x20Time\x22>${expiry.local}</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22time-utc\x22\x20title=\x22Coordinated\x20Universal\x20Time\x22>${expiry.utc}</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22time-relative\x22>${expiry.relative}</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22time-display\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22time-local\x22\x20title=\x22Tehran\x20Time\x20(GMT+03:30)\x22>${expiry.tehran}</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22time-utc\x22>Asia/Tehran</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22status-badge\x20${expiry.isExpired\x20?\x20\x27status-expired\x27\x20:\x20\x27status-active\x27}\x22>${expiry.isExpired\x20?\x20\x27Expired\x27\x20:\x20\x27Active\x27}</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>${user.notes\x20||\x20\x27-\x27}</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>${user.traffic_limit\x20?\x20formatBytes(user.traffic_limit)\x20:\x20\x27Unlimited\x27}</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>${formatBytes(user.traffic_used\x20||\x200)}</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22actions-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-secondary\x20btn-edit\x22\x20data-uuid=\x22${user.uuid}\x22>Edit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-delete\x22\x20data-uuid=\x22${user.uuid}\x22>Delete</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20`;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20userList.appendChild(row);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20async\x20function\x20fetchAndRenderUsers()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20allUsers\x20=\x20await\x20api.get(\x27/users\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20allUsers.sort((a,\x20b)\x20=>\x20new\x20Date(b.created_at)\x20-\x20new\x20Date(a.created_at));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20renderUsers();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20fetchStats();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x20showToast(error.message,\x20true);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20async\x20function\x20handleCreateUser(e)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20e.preventDefault();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20localDate\x20=\x20document.getElementById(\x27expiryDate\x27).value;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20localTime\x20=\x20document.getElementById(\x27expiryTime\x27).value;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20{\x20utcDate,\x20utcTime\x20}\x20=\x20localToUTC(localDate,\x20localTime);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(!utcDate\x20||\x20!utcTime)\x20return\x20showToast(\x27Invalid\x20date\x20or\x20time\x20entered.\x27,\x20true);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20dataLimit\x20=\x20document.getElementById(\x27dataLimit\x27).value;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20dataUnit\x20=\x20document.getElementById(\x27dataUnit\x27).value;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20let\x20trafficLimit\x20=\x20null;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(dataUnit\x20!==\x20\x27unlimited\x27\x20&&\x20dataLimit)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20multipliers\x20=\x20{\x20KB:\x201024,\x20MB:\x201024\x20**\x202,\x20GB:\x201024\x20**\x203,\x20TB:\x201024\x20**\x204\x20};\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20trafficLimit\x20=\x20parseFloat(dataLimit)\x20*\x20(multipliers[dataUnit]\x20||\x201);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20userData\x20=\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uuid:\x20uuidInput.value,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20exp_date:\x20utcDate,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20exp_time:\x20utcTime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20notes:\x20document.getElementById(\x27notes\x27).value,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20traffic_limit:\x20trafficLimit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20};\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20await\x20api.post(\x27/users\x27,\x20userData);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20showToast(\x27User\x20created\x20successfully!\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20createUserForm.reset();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uuidInput.value\x20=\x20crypto.randomUUID();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20setDefaultExpiry();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20await\x20fetchAndRenderUsers();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x20showToast(error.message,\x20true);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20async\x20function\x20handleDeleteUser(uuid)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(confirm(`Delete\x20user\x20${uuid}?`))\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20await\x20api.delete(`/users/${uuid}`);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20showToast(\x27User\x20deleted\x20successfully!\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20await\x20fetchAndRenderUsers();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x20showToast(error.message,\x20true);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20async\x20function\x20handleBulkDelete()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20selected\x20=\x20Array.from(document.querySelectorAll(\x27.user-checkbox:checked\x27)).map(cb\x20=>\x20cb.dataset.uuid);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(selected.length\x20===\x200)\x20return\x20showToast(\x27No\x20users\x20selected.\x27,\x20true);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(confirm(`Delete\x20${selected.length}\x20selected\x20users?`))\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20await\x20api.post(\x27/users/bulk-delete\x27,\x20{\x20uuids:\x20selected\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20showToast(\x27Selected\x20users\x20deleted\x20successfully!\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20await\x20fetchAndRenderUsers();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x20showToast(error.message,\x20true);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20function\x20openEditModal(uuid)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20user\x20=\x20allUsers.find(u\x20=>\x20u.uuid\x20===\x20uuid);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(!user)\x20return\x20showToast(\x27User\x20not\x20found.\x27,\x20true);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20{\x20localDate,\x20localTime\x20}\x20=\x20utcToLocal(user.expiration_date,\x20user.expiration_time);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27editUuid\x27).value\x20=\x20user.uuid;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27editExpiryDate\x27).value\x20=\x20localDate;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27editExpiryTime\x27).value\x20=\x20localTime;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27editNotes\x27).value\x20=\x20user.notes\x20||\x20\x27\x27;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20editDataLimit\x20=\x20document.getElementById(\x27editDataLimit\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20editDataUnit\x20=\x20document.getElementById(\x27editDataUnit\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(user.traffic_limit\x20===\x20null\x20||\x20user.traffic_limit\x20===\x200)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20editDataUnit.value\x20=\x20\x27unlimited\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20editDataLimit.value\x20=\x20\x27\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20let\x20bytes\x20=\x20user.traffic_limit;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20let\x20unit\x20=\x20\x27KB\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20let\x20value\x20=\x20bytes\x20/\x201024;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(value\x20>=\x201024)\x20{\x20value\x20=\x20value\x20/\x201024;\x20unit\x20=\x20\x27MB\x27;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(value\x20>=\x201024)\x20{\x20value\x20=\x20value\x20/\x201024;\x20unit\x20=\x20\x27GB\x27;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(value\x20>=\x201024)\x20{\x20value\x20=\x20value\x20/\x201024;\x20unit\x20=\x20\x27TB\x27;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20editDataLimit.value\x20=\x20value.toFixed(2);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20editDataUnit.value\x20=\x20unit;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27resetTraffic\x27).checked\x20=\x20false;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20editModal.classList.add(\x27show\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20function\x20closeEditModal()\x20{\x20editModal.classList.remove(\x27show\x27);\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20async\x20function\x20handleEditUser(e)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20e.preventDefault();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20localDate\x20=\x20document.getElementById(\x27editExpiryDate\x27).value;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20localTime\x20=\x20document.getElementById(\x27editExpiryTime\x27).value;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20{\x20utcDate,\x20utcTime\x20}\x20=\x20localToUTC(localDate,\x20localTime);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(!utcDate\x20||\x20!utcTime)\x20return\x20showToast(\x27Invalid\x20date\x20or\x20time\x20entered.\x27,\x20true);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20dataLimit\x20=\x20document.getElementById(\x27editDataLimit\x27).value;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20dataUnit\x20=\x20document.getElementById(\x27editDataUnit\x27).value;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20let\x20trafficLimit\x20=\x20null;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(dataUnit\x20!==\x20\x27unlimited\x27\x20&&\x20dataLimit)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20multipliers\x20=\x20{\x20KB:\x201024,\x20MB:\x201024\x20**\x202,\x20GB:\x201024\x20**\x203,\x20TB:\x201024\x20**\x204\x20};\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20trafficLimit\x20=\x20parseFloat(dataLimit)\x20*\x20(multipliers[dataUnit]\x20||\x201);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20updatedData\x20=\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20exp_date:\x20utcDate,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20exp_time:\x20utcTime,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20notes:\x20document.getElementById(\x27editNotes\x27).value,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20traffic_limit:\x20trafficLimit,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20reset_traffic:\x20document.getElementById(\x27resetTraffic\x27).checked\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20};\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20await\x20api.put(`/users/${document.getElementById(\x27editUuid\x27).value}`,\x20updatedData);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20showToast(\x27User\x20updated\x20successfully!\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20closeEditModal();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20await\x20fetchAndRenderUsers();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x20showToast(error.message,\x20true);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20function\x20setDefaultExpiry()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20now\x20=\x20new\x20Date();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20now.setDate(now.getDate()\x20+\x201);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20year\x20=\x20now.getFullYear();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20month\x20=\x20pad(now.getMonth()\x20+\x201);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20day\x20=\x20pad(now.getDate());\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20hours\x20=\x20pad(now.getHours());\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20minutes\x20=\x20pad(now.getMinutes());\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20seconds\x20=\x20pad(now.getSeconds());\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27expiryDate\x27).value\x20=\x20`${year}-${month}-${day}`;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27expiryTime\x27).value\x20=\x20`${hours}:${minutes}:${seconds}`;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20function\x20filterUsers()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20searchTerm\x20=\x20searchInput.value.toLowerCase();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20filtered\x20=\x20allUsers.filter(user\x20=>\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20user.uuid.toLowerCase().includes(searchTerm)\x20||\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(user.notes\x20&&\x20user.notes.toLowerCase().includes(searchTerm))\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20renderUsers(filtered);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20generateUUIDBtn.addEventListener(\x27click\x27,\x20()\x20=>\x20uuidInput.value\x20=\x20crypto.randomUUID());\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20createUserForm.addEventListener(\x27submit\x27,\x20handleCreateUser);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20editUserForm.addEventListener(\x27submit\x27,\x20handleEditUser);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20editModal.addEventListener(\x27click\x27,\x20(e)\x20=>\x20{\x20if\x20(e.target\x20===\x20editModal)\x20closeEditModal();\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27modalCloseBtn\x27).addEventListener(\x27click\x27,\x20closeEditModal);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27modalCancelBtn\x27).addEventListener(\x27click\x27,\x20closeEditModal);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20userList.addEventListener(\x27click\x27,\x20(e)\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20target\x20=\x20e.target.closest(\x27button\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(!target)\x20return;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20uuid\x20=\x20target.dataset.uuid;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(target.classList.contains(\x27btn-edit\x27))\x20openEditModal(uuid);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20else\x20if\x20(target.classList.contains(\x27btn-delete\x27))\x20handleDeleteUser(uuid);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20searchInput.addEventListener(\x27input\x27,\x20filterUsers);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20selectAll.addEventListener(\x27change\x27,\x20(e)\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.querySelectorAll(\x27.user-checkbox\x27).forEach(cb\x20=>\x20cb.checked\x20=\x20e.target.checked);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20deleteSelected.addEventListener(\x27click\x27,\x20handleBulkDelete);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20setDefaultExpiry();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uuidInput.value\x20=\x20crypto.randomUUID();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20fetchAndRenderUsers();\x0a\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20</script>\x0a</body>\x0a</html>';async function isAdmin(a,b){const c=a['headers']['get']('Cookie');if(!c)return![];const d=c['match'](/auth_token=([^;]+)/)?.[0x1];if(!d)return![];const e=await b['USER_KV']['get']('admin_session_token');return e&&e===d;}async function handleAdminRequest(a,b,c){const d=new URL(a['url']),{pathname:f}=d,g={'Content-Type':'application/json'};if(!b['ADMIN_KEY'])return new Response('Admin\x20panel\x20is\x20not\x20configured.',{'status':0x1f7});if(f['startsWith']('/admin/api/')){if(!await isAdmin(a,b))return new Response(JSON['stringify']({'error':'Forbidden'}),{'status':0x193,'headers':g});if(a['method']!=='GET'){const i=a['headers']['get']('Origin');if(!i||new URL(i)['hostname']!==d['hostname'])return new Response(JSON['stringify']({'error':'Invalid\x20Origin'}),{'status':0x193,'headers':g});}if(f==='/admin/api/stats'&&a['method']==='GET')try{const j=await b['DB']['prepare']('SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20users')['first']('count'),k=await b['DB']['prepare']('SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20users\x20WHERE\x20datetime(expiration_date\x20||\x20\x27T\x27\x20||\x20expiration_time\x20||\x20\x27Z\x27)\x20<\x20datetime(\x27now\x27)')['first'](),l=k?.['count']||0x0,m=j-l,n=await b['DB']['prepare']('SELECT\x20SUM(traffic_used)\x20as\x20sum\x20FROM\x20users')['first'](),o=n?.['sum']||0x0;return new Response(JSON['stringify']({'total_users':j,'active_users':m,'expired_users':l,'total_traffic':o}),{'status':0xc8,'headers':g});}catch(p){return new Response(JSON['stringify']({'error':p['message']}),{'status':0x1f4,'headers':g});}if(f==='/admin/api/users'&&a['method']==='GET')try{const {results:q}=await b['DB']['prepare']('SELECT\x20uuid,\x20created_at,\x20expiration_date,\x20expiration_time,\x20notes,\x20traffic_limit,\x20traffic_used\x20FROM\x20users\x20ORDER\x20BY\x20created_at\x20DESC')['all']();return new Response(JSON['stringify'](q??[]),{'status':0xc8,'headers':g});}catch(r){return new Response(JSON['stringify']({'error':r['message']}),{'status':0x1f4,'headers':g});}if(f==='/admin/api/users'&&a['method']==='POST')try{const {uuid:s,exp_date:t,exp_time:u,notes:v,traffic_limit:w}=await a['json']();if(!s||!t||!u||!/^\d{4}-\d{2}-\d{2}$/['test'](t)||!/^\d{2}:\d{2}:\d{2}$/['test'](u))throw new Error('Invalid\x20or\x20missing\x20fields.\x20Use\x20UUID,\x20YYYY-MM-DD,\x20and\x20HH:MM:SS.');return await b['DB']['prepare']('INSERT\x20INTO\x20users\x20(uuid,\x20expiration_date,\x20expiration_time,\x20notes,\x20traffic_limit,\x20traffic_used)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x200)')['bind'](s,t,u,v||null,w)['run'](),c['waitUntil'](b['USER_KV']['put']('user:'+s,JSON['stringify']({'uuid':s,'expiration_date':t,'expiration_time':u,'traffic_limit':w,'traffic_used':0x0}))),new Response(JSON['stringify']({'success':!![],'uuid':s}),{'status':0xc9,'headers':g});}catch(x){if(x['message']?.['includes']('UNIQUE\x20constraint\x20failed'))return new Response(JSON['stringify']({'error':'A\x20user\x20with\x20this\x20UUID\x20already\x20exists.'}),{'status':0x199,'headers':g});return new Response(JSON['stringify']({'error':x['message']}),{'status':0x190,'headers':g});}if(f==='/admin/api/users/bulk-delete'&&a['method']==='POST')try{const {uuids:y}=await a['json']();if(!Array['isArray'](y)||y['length']===0x0)throw new Error('Invalid\x20request\x20body:\x20Expected\x20an\x20array\x20of\x20UUIDs.');const z=b['DB']['prepare']('DELETE\x20FROM\x20users\x20WHERE\x20uuid\x20=\x20?'),A=y['map'](B=>z['bind'](B));return await b['DB']['batch'](A),c['waitUntil'](Promise['all'](y['map'](B=>b['USER_KV']['delete']('user:'+B)))),new Response(JSON['stringify']({'success':!![],'count':y['length']}),{'status':0xc8,'headers':g});}catch(B){return new Response(JSON['stringify']({'error':B['message']}),{'status':0x190,'headers':g});}const h=f['match'](/^\/admin\/api\/users\/([a-f0-9-]+)$/);if(h&&a['method']==='PUT'){const C=h[0x1];try{const {exp_date:D,exp_time:E,notes:F,traffic_limit:G,reset_traffic:H}=await a['json']();if(!D||!E||!/^\d{4}-\d{2}-\d{2}$/['test'](D)||!/^\d{2}:\d{2}:\d{2}$/['test'](E))throw new Error('Invalid\x20date/time\x20fields.\x20Use\x20YYYY-MM-DD\x20and\x20HH:MM:SS.');let I='UPDATE\x20users\x20SET\x20expiration_date\x20=\x20?,\x20expiration_time\x20=\x20?,\x20notes\x20=\x20?,\x20traffic_limit\x20=\x20?',J=[D,E,F||null,G];return H&&(I+=',\x20traffic_used\x20=\x200'),I+='\x20WHERE\x20uuid\x20=\x20?',J['push'](C),await b['DB']['prepare'](I)['bind'](...J)['run'](),c['waitUntil'](b['USER_KV']['delete']('user:'+C)),new Response(JSON['stringify']({'success':!![],'uuid':C}),{'status':0xc8,'headers':g});}catch(K){return new Response(JSON['stringify']({'error':K['message']}),{'status':0x190,'headers':g});}}if(h&&a['method']==='DELETE'){const L=h[0x1];try{return await b['DB']['prepare']('DELETE\x20FROM\x20users\x20WHERE\x20uuid\x20=\x20?')['bind'](L)['run'](),c['waitUntil'](b['USER_KV']['delete']('user:'+L)),new Response(JSON['stringify']({'success':!![],'uuid':L}),{'status':0xc8,'headers':g});}catch(M){return new Response(JSON['stringify']({'error':M['message']}),{'status':0x1f4,'headers':g});}}return new Response(JSON['stringify']({'error':'API\x20route\x20not\x20found'}),{'status':0x194,'headers':g});}if(f==='/admin'){if(a['method']==='POST'){const N=await a['formData']();if(N['get']('password')===b['ADMIN_KEY']){const O=crypto['randomUUID']();return c['waitUntil'](b['USER_KV']['put']('admin_session_token',O,{'expirationTtl':0x15180})),new Response(null,{'status':0x12e,'headers':{'Location':'/admin','Set-Cookie':'auth_token='+O+';\x20HttpOnly;\x20Secure;\x20Path=/admin;\x20Max-Age=86400;\x20SameSite=Strict'}});}else{const P=adminLoginHTML['replace']('</form>','</form><p\x20class=\x22error\x22>Invalid\x20password.</p>');return new Response(P,{'status':0x191,'headers':{'Content-Type':'text/html;charset=utf-8'}});}}if(a['method']==='GET')return new Response(await isAdmin(a,b)?adminPanelHTML:adminLoginHTML,{'headers':{'Content-Type':'text/html;charset=utf-8'}});return new Response('Method\x20Not\x20Allowed',{'status':0x195});}return new Response('Not\x20found',{'status':0x194});}async function ProtocolOverWSHandler(a,b,c,d){const e=new WebSocketPair(),[f,g]=Object['values'](e);g['accept']();let h='',i='',j=0x0,k='',l=null;const m=(t,u)=>console['log']('['+h+':'+i+']\x20'+t,u||''),n=()=>{if(j>0x0&&k){const t=j,u=k;j=0x0,d['waitUntil'](updateUsage(c,u,t,d)['catch'](v=>console['error']('Deferred\x20usage\x20update\x20failed\x20for\x20'+u+':',v)));}},o=setInterval(n,0x2710),p=()=>{clearInterval(o),n();};g['addEventListener']('close',p,{'once':!![]}),g['addEventListener']('error',p,{'once':!![]});const q=a['headers']['get']('Sec-WebSocket-Protocol')||'',r=MakeReadableWebSocketStream(g,q,m);let s={'value':null};return r['pipeTo'](new WritableStream({async 'write'(t,u){j+=t['byteLength'];if(l)return l['write'](t);if(s['value']){const D=s['value']['writable']['getWriter']();await D['write'](t),D['releaseLock']();return;}const {user:v,hasError:w,message:x,addressType:y,portRemote:portRemote=0x1bb,addressRemote:addressRemote='',rawDataIndex:z,ProtocolVersion:ProtocolVersion=new Uint8Array([0x0,0x0]),isUDP:A}=await ProcessProtocolHeader(t,c,d);if(w){u['error'](new Error(x));return;}if(!v){u['error'](new Error('User\x20not\x20found'));return;}k=v['uuid'];if(isExpired(v['expiration_date'],v['expiration_time'])){u['error'](new Error('User\x20expired'));return;}if(v['traffic_limit']&&v['traffic_limit']>0x0){const E=(v['traffic_used']||0x0)+j;if(E>=v['traffic_limit']){u['error'](new Error('Data\x20limit\x20reached'));return;}}h=addressRemote,i=portRemote+'--'+Math['random']()+'\x20'+(A?'udp':'tcp');const B=new Uint8Array([ProtocolVersion[0x0],0x0]),C=t['slice'](z);if(A){if(portRemote===0x35){const F=await createDnsPipeline(g,B,m,G=>{j+=G;});l=F['write'],await l(C);}else u['error'](new Error('UDP\x20proxy\x20only\x20for\x20DNS\x20(port\x2053)'));return;}HandleTCPOutBound(s,y,addressRemote,portRemote,C,g,B,m,b,G=>{j+=G;});},'close'(){m('readableWebSocketStream\x20closed'),p();},'abort'(t){m('readableWebSocketStream\x20aborted',t),p();}}))['catch'](t=>{console['error']('Pipeline\x20failed:',t['stack']||t),safeCloseWebSocket(g),p();}),new Response(null,{'status':0x65,'webSocket':f});}async function ProcessProtocolHeader(a,b,c){if(a['byteLength']<0x11)return{'hasError':!![],'message':'invalid\x20data'};const d=new DataView(a['buffer']||a),f=d['getUint8'](0x0);let g;try{g=stringify(new Uint8Array(a['slice'](0x1,0x11)));}catch(u){return{'hasError':!![],'message':'invalid\x20UUID\x20format'};}const h=await getUserData(b,g,c);if(!h)return{'hasError':!![],'message':'invalid\x20user'};const i=0x11;if(a['byteLength']<i+0x1)return{'hasError':!![],'message':'invalid\x20data\x20length'};const j=d['getUint8'](i),k=i+0x1+j;if(a['byteLength']<k+0x1)return{'hasError':!![],'message':'invalid\x20data\x20length\x20(command)'};const l=d['getUint8'](k);if(l!==0x1&&l!==0x2)return{'hasError':!![],'message':'command\x20'+l+'\x20is\x20not\x20supported'};const m=k+0x1;if(a['byteLength']<m+0x2)return{'hasError':!![],'message':'invalid\x20data\x20length\x20(port)'};const n=d['getUint16'](m,![]),o=m+0x2;if(a['byteLength']<o+0x1)return{'hasError':!![],'message':'invalid\x20data\x20length\x20(address\x20type)'};const p=d['getUint8'](o);let q,r,s;switch(p){case 0x1:r=0x4,s=o+0x1;if(a['byteLength']<s+r)return{'hasError':!![],'message':'invalid\x20data\x20length\x20(ipv4)'};q=new Uint8Array(a['slice'](s,s+r))['join']('.');break;case 0x2:if(a['byteLength']<o+0x2)return{'hasError':!![],'message':'invalid\x20data\x20length\x20(domain\x20length)'};r=d['getUint8'](o+0x1),s=o+0x2;if(a['byteLength']<s+r)return{'hasError':!![],'message':'invalid\x20data\x20length\x20(domain)'};q=new TextDecoder()['decode'](a['slice'](s,s+r));break;case 0x3:r=0x10,s=o+0x1;if(a['byteLength']<s+r)return{'hasError':!![],'message':'invalid\x20data\x20length\x20(ipv6)'};q=Array['from']({'length':0x8},(v,w)=>d['getUint16'](s+w*0x2,![])['toString'](0x10))['join'](':');break;default:return{'hasError':!![],'message':'invalid\x20addressType:\x20'+p};}const t=s+r;if(a['byteLength']<t)return{'hasError':!![],'message':'invalid\x20data\x20length\x20(raw\x20data)'};return{'user':h,'hasError':![],'addressRemote':q,'addressType':p,'portRemote':n,'rawDataIndex':t,'ProtocolVersion':new Uint8Array([f]),'isUDP':l===0x2};}async function HandleTCPOutBound(a,b,c,d,f,g,h,i,j,k){async function l(p,q,r=![]){let s;r||j['socks5Relay']?s=await socks5Connect(b,p,q,i,j['parsedSocks5Address']):s=connect({'hostname':p,'port':q});a['value']=s,i('connected\x20to\x20'+p+':'+q);const t=s['writable']['getWriter']();return await t['write'](f),t['releaseLock'](),s;}const m=j['proxyIP']||c,n=j['proxyIP']?j['proxyPort']||0x1bb:d;j['proxyIP']&&i('Using\x20PROXYIP\x20'+m+':'+n+'\x20for\x20target\x20'+c+':'+d);async function o(){try{const p=j['enableSocks']?await l(c,d,!![]):await l(m,n,![]);p['closed']['catch'](q=>console['log']('retry\x20tcpSocket\x20closed\x20error',q))['finally'](()=>safeCloseWebSocket(g)),RemoteSocketToWS(p,g,h,null,i,k);}catch(q){i('Retry\x20failed:\x20'+q['message']),safeCloseWebSocket(g);}}try{const p=await l(m,n,j['enableSocks']);p['closed']['catch'](q=>console['log']('tcpSocket\x20closed\x20error',q))['finally'](()=>safeCloseWebSocket(g)),RemoteSocketToWS(p,g,h,o,i,k);}catch(q){i('Failed\x20to\x20connect\x20to\x20'+m+':'+n+':\x20'+q['message']),safeCloseWebSocket(g);}}function MakeReadableWebSocketStream(a,b,c){return new ReadableStream({'start'(d){a['addEventListener']('message',g=>{d['enqueue'](g['data']);}),a['addEventListener']('close',()=>{safeCloseWebSocket(a),d['close']();}),a['addEventListener']('error',g=>{c('webSocketServer\x20has\x20error'),d['error'](g);});const {earlyData:e,error:f}=base64ToArrayBuffer(b);if(f)d['error'](f);else e&&d['enqueue'](e);},'pull'(d){},'cancel'(d){c('ReadableStream\x20was\x20canceled,\x20due\x20to\x20'+d),safeCloseWebSocket(a);}});}async function RemoteSocketToWS(a,b,c,d,e,f){let g=![];try{await a['readable']['pipeTo'](new WritableStream({async 'write'(h){if(b['readyState']!==CONST['WS_READY_STATE_OPEN'])throw new Error('WebSocket\x20is\x20not\x20open');g=!![];f&&f(h['byteLength']);const i=c?await new Blob([c,h])['arrayBuffer']():h;b['send'](i),c=null;},'close'(){e('Remote\x20connection\x20readable\x20closed.\x20Had\x20incoming\x20data:\x20'+g);},'abort'(h){console['error']('Remote\x20connection\x20readable\x20aborted:',h);}}));}catch(h){console['error']('RemoteSocketToWS\x20error:',h['stack']||h),safeCloseWebSocket(b);}!g&&d&&(e('No\x20incoming\x20data,\x20retrying'),d());}function base64ToArrayBuffer(a){if(!a)return{'earlyData':null,'error':null};try{const b=atob(a['replace'](/-/g,'+')['replace'](/_/g,'/')),c=new ArrayBuffer(b['length']),d=new Uint8Array(c);for(let e=0x0;e<b['length'];e++){d[e]=b['charCodeAt'](e);}return{'earlyData':c,'error':null};}catch(f){return{'earlyData':null,'error':f};}}function safeCloseWebSocket(a){try{(a['readyState']===CONST['WS_READY_STATE_OPEN']||a['readyState']===CONST['WS_READY_STATE_CLOSING'])&&a['close']();}catch(b){console['error']('safeCloseWebSocket\x20error:',b);}}async function createDnsPipeline(a,b,c,d){let e=![];const f=new TransformStream({'transform'(h,i){for(let j=0x0;j<h['byteLength'];){const k=h['slice'](j,j+0x2),l=new DataView(k)['getUint16'](0x0),m=new Uint8Array(h['slice'](j+0x2,j+0x2+l));j=j+0x2+l,i['enqueue'](m);}}});f['readable']['pipeTo'](new WritableStream({async 'write'(h){try{const i=await fetch('https://1.1.1.1/dns-query',{'method':'POST','headers':{'content-type':'application/dns-message'},'body':h}),j=await i['arrayBuffer'](),k=j['byteLength'],l=new Uint8Array([k>>0x8&0xff,k&0xff]);if(a['readyState']===CONST['WS_READY_STATE_OPEN']){c('DNS\x20query\x20successful,\x20length:\x20'+k);const m=e?new Blob([l,j]):new Blob([b,l,j]),n=await m['arrayBuffer']();d&&d(n['byteLength']),a['send'](n),e=!![];}}catch(o){c('DNS\x20query\x20error:\x20'+o);}},'abort'(h){c('DNS\x20WritableStream\x20aborted:\x20'+h);}}))['catch'](h=>{c('DNS\x20stream\x20error:\x20'+h);});const g=f['writable']['getWriter']();return{'write':h=>g['write'](h)};}async function socks5Connect(a,b,c,d,e){const {username:f,password:g,hostname:h,port:i}=e,j=connect({'hostname':h,'port':i}),k=j['writable']['getWriter'](),l=j['readable']['getReader'](),m=new TextEncoder();await k['write'](new Uint8Array([0x5,0x2,0x0,0x2]));let n=(await l['read']())['value'];if(n[0x0]!==0x5||n[0x1]===0xff)throw new Error('SOCKS5\x20server\x20connection\x20failed');if(n[0x1]===0x2){if(!f||!g)throw new Error('SOCKS5\x20auth\x20credentials\x20not\x20provided');const q=new Uint8Array([0x1,f['length'],...m['encode'](f),g['length'],...m['encode'](g)]);await k['write'](q),n=(await l['read']())['value'];if(n[0x0]!==0x1||n[0x1]!==0x0)throw new Error('SOCKS5\x20authentication\x20failed');}let o;switch(a){case 0x1:o=new Uint8Array([0x1,...b['split']('.')['map'](Number)]);break;case 0x2:o=new Uint8Array([0x3,b['length'],...m['encode'](b)]);break;case 0x3:o=new Uint8Array([0x4,...b['split'](':')['flatMap'](r=>[parseInt(r['slice'](0x0,0x2),0x10),parseInt(r['slice'](0x2),0x10)])]);break;default:throw new Error('Invalid\x20addressType\x20for\x20SOCKS5:\x20'+a);}const p=new Uint8Array([0x5,0x1,0x0,...o,c>>0x8,c&0xff]);await k['write'](p),n=(await l['read']())['value'];if(n[0x1]!==0x0)throw new Error('Failed\x20to\x20open\x20SOCKS5\x20connection');return k['releaseLock'](),l['releaseLock'](),j;}function socks5AddressParser(a){try{const [b,c]=a['includes']('@')?a['split']('@'):[null,a],[d,e]=c['split'](':'),f=parseInt(e,0xa);if(!d||isNaN(f))throw new Error();let g,h;if(b){[g,h]=b['split'](':');if(!g)throw new Error();}return{'username':g,'password':h,'hostname':d,'port':f};}catch{throw new Error('Invalid\x20SOCKS5\x20address\x20format.\x20Expected\x20[user:pass@]host:port');}}async function handleScamalyticsLookup(a,b){const c=new URL(a['url']),d=c['searchParams']['get']('ip');if(!d)return new Response(JSON['stringify']({'error':'Missing\x20IP\x20parameter'}),{'status':0x190,'headers':{'Content-Type':'application/json'}});const {username:e,apiKey:f,baseUrl:g}=b['scamalytics'];if(!e||!f)return new Response(JSON['stringify']({'error':'Scamalytics\x20API\x20credentials\x20not\x20configured'}),{'status':0x1f4,'headers':{'Content-Type':'application/json'}});const h=''+g+e+'/?key='+f+'&ip='+d,i=new Headers({'Content-Type':'application/json','Access-Control-Allow-Origin':'*'});try{const j=await fetch(h),k=await j['json']();return new Response(JSON['stringify'](k),{'headers':i});}catch(l){return new Response(JSON['stringify']({'error':l['toString']()}),{'status':0x1f4,'headers':i});}}function handleConfigPage(a,b,c,d){const e=generateBeautifulConfigPage(a,b,c,d['expiration_date'],d['expiration_time'],d['traffic_limit'],d['traffic_used']);return new Response(e,{'headers':{'Content-Type':'text/html;\x20charset=utf-8'}});}function generateBeautifulConfigPage(a,b,c,d='',e='',f=null,g=0x0){const h='https://'+b+'/xray/'+a,i='https://'+b+'/sb/'+a,j={'universalAndroid':'v2rayng://install-config?url='+encodeURIComponent(h),'karing':'karing://install-config?url='+encodeURIComponent(h),'shadowrocket':'shadowrocket://add/sub?url='+encodeURIComponent(h)+'&name='+encodeURIComponent(b),'stash':'stash://install-config?url='+encodeURIComponent(h),'streisand':'streisand://import/'+btoa(h),'clashMeta':'clash://install-config?url='+encodeURIComponent('https://revil-sub.pages.dev/sub/clash-meta?url='+i+'&remote_config=&udp=false&ss_uot=false&show_host=false&forced_ws0rtt=true')};let k='';if(d&&e){const n=e['includes'](':')&&e['split'](':')['length']===0x2?e+':00':e,o=d+'T'+n['split']('.')[0x0]+'Z';k='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22expiration-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22expiration-card-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2\x20class=\x22expiration-title\x22>Expiration\x20Date</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22expiration-relative\x22\x20class=\x22expiration-relative-time\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr\x20class=\x22expiration-divider\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22expiration-display\x22\x20data-utc-time=\x22'+o+'\x22>Loading\x20expiration\x20time...</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';}else k='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22expiration-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22expiration-card-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2\x20class=\x22expiration-title\x22>Expiration\x20Date</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr\x20class=\x22expiration-divider\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22expiration-display\x22>No\x20expiration\x20date\x20set</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';let l='';if(f!==null&&f>0x0){const p=(g/f*0x64)['toFixed'](0x2),q=p>0x5a?'linear-gradient(90deg,\x20#e05d44,\x20#ef4444)':p>0x46?'linear-gradient(90deg,\x20#e0bc44,\x20#f59e0b)':'linear-gradient(90deg,\x20#70b570,\x20#22c55e)';l='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22expiration-card\x20usage-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22expiration-card-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2\x20class=\x22expiration-title\x22>Data\x20Usage</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22expiration-relative-time\x22>'+formatBytes(g)+'\x20/\x20'+formatBytes(f)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr\x20class=\x22expiration-divider\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22usage-progress\x22><div\x20style=\x22width:\x20'+p+'%;\x20background:\x20'+q+';\x22></div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';}else l='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22expiration-card\x20usage-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22expiration-card-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2\x20class=\x22expiration-title\x22>Data\x20Usage</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr\x20class=\x22expiration-divider\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>Unlimited\x20(Used:\x20'+formatBytes(g)+')</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';const m='<!doctype\x20html>\x0a<html\x20lang=\x22en\x22>\x0a<head>\x0a\x20\x20<meta\x20charset=\x22UTF-8\x22\x20/>\x0a\x20\x20<meta\x20name=\x22viewport\x22\x20content=\x22width=device-width,\x20initial-scale=1.0\x22\x20/>\x0a\x20\x20<title>VLESS\x20Proxy\x20Configuration</title>\x0a\x20\x20<link\x20rel=\x22icon\x22\x20href=\x22https://raw.githubusercontent.com/NiREvil/zizifn/refs/heads/Legacy/assets/favicon.png\x22\x20type=\x22image/png\x22>\x0a\x20\x20<link\x20rel=\x22preconnect\x22\x20href=\x22https://fonts.googleapis.com\x22>\x0a\x20\x20<link\x20rel=\x22preconnect\x22\x20href=\x22https://fonts.gstatic.com\x22\x20crossorigin>\x0a\x20\x20<link\x20href=\x22https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&display=swap\x22\x20rel=\x22stylesheet\x22>\x0a\x20\x20<script\x20src=\x22https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js\x22></script>\x0a\x20\x20<style>'+getPageCSS()+'</style>\x0a</head>\x0a<body\x20data-proxy-ip=\x22'+c+'\x22>\x0a\x20\x20'+getPageHTML(j,h,i,k,l)+'\x0a\x20\x20<script>'+getPageScript()+'</script>\x0a</body>\x0a</html>';return m;}function getPageCSS(){return'\x0a\x20\x20\x20\x20*\x20{\x20margin:\x200;\x20padding:\x200;\x20box-sizing:\x20border-box;\x20}\x0a\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20font-family:\x20\x22Aldine\x20401\x20BT\x20Web\x22;\x0a\x20\x20\x20\x20\x20\x20src:\x20url(\x22https://pub-7a3b428c76aa411181a0f4dd7fa9064b.r2.dev/Aldine401_Mersedeh.woff2\x22)\x20format(\x22woff2\x22);\x0a\x20\x20\x20\x20\x20\x20font-weight:\x20400;\x20font-style:\x20normal;\x20font-display:\x20swap;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20font-family:\x20\x22Styrene\x20B\x20LC\x22;\x0a\x20\x20\x20\x20\x20\x20src:\x20url(\x22https://pub-7a3b428c76aa411181a0f4dd7fa9064b.r2.dev/StyreneBLC-Regular.woff2\x22)\x20format(\x22woff2\x22);\x0a\x20\x20\x20\x20\x20\x20font-weight:\x20400;\x20font-style:\x20normal;\x20font-display:\x20swap;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20@font-face\x20{\x0a\x20\x20\x20\x20\x20\x20font-family:\x20\x22Styrene\x20B\x20LC\x22;\x0a\x20\x20\x20\x20\x20\x20src:\x20url(\x22https://pub-7a3b428c76aa411181a0f4dd7fa9064b.r2.dev/StyreneBLC-Medium.woff2\x22)\x20format(\x22woff2\x22);\x0a\x20\x20\x20\x20\x20\x20font-weight:\x20500;\x20font-style:\x20normal;\x20font-display:\x20swap;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20:root\x20{\x0a\x20\x20\x20\x20\x20\x20--background-primary:\x20#2a2421;\x20--background-secondary:\x20#35302c;\x20--background-tertiary:\x20#413b35;\x0a\x20\x20\x20\x20\x20\x20--border-color:\x20#5a4f45;\x20--border-color-hover:\x20#766a5f;\x20--text-primary:\x20#e5dfd6;\x20--text-secondary:\x20#b3a89d;\x0a\x20\x20\x20\x20\x20\x20--text-accent:\x20#ffffff;\x20--accent-primary:\x20#be9b7b;\x20--accent-secondary:\x20#d4b595;\x20--accent-tertiary:\x20#8d6e5c;\x0a\x20\x20\x20\x20\x20\x20--accent-primary-darker:\x20#8a6f56;\x20--button-text-primary:\x20#2a2421;\x20--button-text-secondary:\x20var(--text-primary);\x0a\x20\x20\x20\x20\x20\x20--shadow-color:\x20rgba(0,\x200,\x200,\x200.35);\x20--shadow-color-accent:\x20rgba(190,\x20155,\x20123,\x200.4);\x0a\x20\x20\x20\x20\x20\x20--border-radius:\x2012px;\x20--transition-speed:\x200.2s;\x20--transition-speed-fast:\x200.1s;\x20\x0a\x20\x20\x20\x20\x20\x20--transition-speed-medium:\x200.3s;\x20--transition-speed-long:\x200.6s;\x0a\x20\x20\x20\x20\x20\x20--status-success:\x20#70b570;\x20--status-error:\x20#e05d44;\x20--status-warning:\x20#e0bc44;\x20--status-info:\x20#4f90c4;\x0a\x20\x20\x20\x20\x20\x20--serif:\x20\x22Aldine\x20401\x20BT\x20Web\x22,\x20\x22Times\x20New\x20Roman\x22,\x20Times,\x20Georgia,\x20ui-serif,\x20serif;\x0a\x20\x20\x20\x20\x20\x20--sans-serif:\x20\x22Styrene\x20B\x20LC\x22,\x20-apple-system,\x20BlinkMacSystemFont,\x20\x22Segoe\x20UI\x22,\x20Helvetica,\x20Arial,\x20\x22Noto\x20Color\x20Emoji\x22,\x20sans-serif;\x0a\x20\x20\x20\x20\x20\x20--mono-serif:\x20\x22Fira\x20Code\x22,\x20Cantarell,\x20\x22Courier\x20Prime\x22,\x20monospace;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20body\x20{\x0a\x20\x20\x20\x20\x20\x20font-family:\x20var(--sans-serif);\x20font-size:\x2016px;\x20font-weight:\x20400;\x20font-style:\x20normal;\x0a\x20\x20\x20\x20\x20\x20background-color:\x20var(--background-primary);\x20color:\x20var(--text-primary);\x0a\x20\x20\x20\x20\x20\x20padding:\x203rem;\x20line-height:\x201.5;\x20-webkit-font-smoothing:\x20antialiased;\x20-moz-osx-font-smoothing:\x20grayscale;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20@keyframes\x20rgb-animation\x20{\x0a\x20\x20\x20\x20\x20\x200%\x20{\x20transform:\x20rotate(0deg);\x20}\x0a\x20\x20\x20\x20\x20\x20100%\x20{\x20transform:\x20rotate(360deg);\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.expiration-card,\x20.usage-card\x20{\x0a\x20\x20\x20\x20\x20\x20position:\x20relative;\x20padding:\x203px;\x20background:\x20var(--background-secondary);\x0a\x20\x20\x20\x20\x20\x20border-radius:\x20var(--border-radius);\x20margin-bottom:\x2024px;\x20overflow:\x20hidden;\x20z-index:\x201;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.expiration-card::before,\x20.usage-card::before\x20{\x0a\x20\x20\x20\x20\x20\x20content:\x20\x27\x27;\x20position:\x20absolute;\x20top:\x20-50%;\x20left:\x20-50%;\x20width:\x20200%;\x20height:\x20200%;\x0a\x20\x20\x20\x20\x20\x20background:\x20conic-gradient(\x0a\x20\x20\x20\x20\x20\x20\x20\x20#ff0000,\x20#ff00ff,\x20#0000ff,\x20#00ffff,\x20#00ff00,\x20#ffff00,\x20#ff0000\x0a\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20animation:\x20rgb-animation\x204s\x20linear\x20infinite;\x20z-index:\x20-1;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.expiration-card-content\x20{\x0a\x20\x20\x20\x20\x20\x20background:\x20var(--background-secondary);\x20padding:\x2020px;\x20border-radius:\x20calc(var(--border-radius)\x20-\x203px);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.expiration-title\x20{\x0a\x20\x20\x20\x20\x20\x20font-family:\x20var(--serif);\x20font-size:\x201.6rem;\x20font-weight:\x20400;\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20color:\x20var(--accent-secondary);\x20margin:\x200\x200\x2012px\x200;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.expiration-relative-time\x20{\x0a\x20\x20\x20\x20\x20\x20text-align:\x20center;\x20font-size:\x201.1rem;\x20font-weight:\x20500;\x0a\x20\x20\x20\x20\x20\x20margin-bottom:\x2012px;\x20padding:\x204px\x208px;\x20border-radius:\x206px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.expiration-relative-time.active\x20{\x0a\x20\x20\x20\x20\x20\x20color:\x20var(--status-success);\x20background-color:\x20rgba(112,\x20181,\x20112,\x200.1);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.expiration-relative-time.expired\x20{\x0a\x20\x20\x20\x20\x20\x20color:\x20var(--status-error);\x20background-color:\x20rgba(224,\x2093,\x2068,\x200.1);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.expiration-divider\x20{\x0a\x20\x20\x20\x20\x20\x20border:\x200;\x20height:\x201px;\x20background:\x20var(--border-color);\x0a\x20\x20\x20\x20\x20\x20margin:\x200\x20auto\x2016px;\x20width:\x2080%;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20#expiration-display\x20{\x20\x0a\x20\x20\x20\x20\x20\x20font-size:\x200.9em;\x20text-align:\x20center;\x20color:\x20var(--text-secondary);\x20\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20#expiration-display\x20span\x20{\x20\x0a\x20\x20\x20\x20\x20\x20display:\x20block;\x20margin-top:\x208px;\x20font-size:\x200.9em;\x20line-height:\x201.6;\x20\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20#expiration-display\x20strong\x20{\x20\x0a\x20\x20\x20\x20\x20\x20color:\x20var(--text-primary);\x20font-weight:\x20500;\x20\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.usage-progress\x20{\x0a\x20\x20\x20\x20\x20\x20height:\x2010px;\x20background:\x20#413b35;\x20border-radius:\x205px;\x0a\x20\x20\x20\x20\x20\x20overflow:\x20hidden;\x20margin-bottom:\x2010px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.usage-progress\x20div\x20{\x20\x0a\x20\x20\x20\x20\x20\x20height:\x20100%;\x20transition:\x20width\x200.5s\x20ease;\x20\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.container\x20{\x0a\x20\x20\x20\x20\x20\x20max-width:\x20800px;\x20margin:\x2020px\x20auto;\x20padding:\x200\x2012px;\x20border-radius:\x20var(--border-radius);\x0a\x20\x20\x20\x20\x20\x20box-shadow:\x200\x206px\x2015px\x20rgba(0,\x200,\x200,\x200.2),\x200\x200\x2025px\x208px\x20var(--shadow-color-accent);\x0a\x20\x20\x20\x20\x20\x20transition:\x20box-shadow\x20var(--transition-speed-medium)\x20ease;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.container:hover\x20{\x20\x0a\x20\x20\x20\x20\x20\x20box-shadow:\x200\x208px\x2020px\x20rgba(0,\x200,\x200,\x200.25),\x200\x200\x2035px\x2010px\x20var(--shadow-color-accent);\x20\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20margin-bottom:\x2030px;\x20padding-top:\x2030px;\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.header\x20h1\x20{\x20\x0a\x20\x20\x20\x20\x20\x20font-family:\x20var(--serif);\x20font-weight:\x20400;\x20font-size:\x201.8rem;\x20\x0a\x20\x20\x20\x20\x20\x20color:\x20var(--text-accent);\x20margin-top:\x200px;\x20margin-bottom:\x202px;\x20\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.header\x20p\x20{\x20\x0a\x20\x20\x20\x20\x20\x20color:\x20var(--text-secondary);\x20font-size:\x200.9rem;\x20font-weight:\x20400;\x20\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.config-card\x20{\x0a\x20\x20\x20\x20\x20\x20background:\x20var(--background-secondary);\x20border-radius:\x20var(--border-radius);\x20\x0a\x20\x20\x20\x20\x20\x20padding:\x2020px;\x20margin-bottom:\x2024px;\x20border:\x201px\x20solid\x20var(--border-color);\x0a\x20\x20\x20\x20\x20\x20transition:\x20border-color\x20var(--transition-speed)\x20ease,\x20box-shadow\x20var(--transition-speed)\x20ease;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.config-card:hover\x20{\x20\x0a\x20\x20\x20\x20\x20\x20border-color:\x20var(--border-color-hover);\x20box-shadow:\x200\x204px\x208px\x20var(--shadow-color);\x20\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.config-title\x20{\x0a\x20\x20\x20\x20\x20\x20font-family:\x20var(--serif);\x20font-size:\x201.6rem;\x20font-weight:\x20400;\x20color:\x20var(--accent-secondary);\x0a\x20\x20\x20\x20\x20\x20margin-bottom:\x2016px;\x20padding-bottom:\x2013px;\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x0a\x20\x20\x20\x20\x20\x20display:\x20flex;\x20align-items:\x20center;\x20justify-content:\x20space-between;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.button\x20{\x0a\x20\x20\x20\x20\x20\x20display:\x20inline-flex;\x20align-items:\x20center;\x20justify-content:\x20center;\x20gap:\x208px;\x0a\x20\x20\x20\x20\x20\x20padding:\x208px\x2016px;\x20border-radius:\x20var(--border-radius);\x20font-size:\x2015px;\x20font-weight:\x20500;\x0a\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x20border:\x201px\x20solid\x20var(--border-color);\x20background-color:\x20var(--background-tertiary);\x0a\x20\x20\x20\x20\x20\x20color:\x20var(--button-text-secondary);\x0a\x20\x20\x20\x20\x20\x20transition:\x20background-color\x20var(--transition-speed)\x20ease,\x20border-color\x20var(--transition-speed)\x20ease,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color\x20var(--transition-speed)\x20ease,\x20transform\x20var(--transition-speed)\x20ease,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow\x20var(--transition-speed)\x20ease;\x0a\x20\x20\x20\x20\x20\x20text-decoration:\x20none;\x20overflow:\x20hidden;\x20position:\x20relative;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.button:hover\x20{\x0a\x20\x20\x20\x20\x20\x20background-color:\x20#4d453e;\x20color:\x20var(--accent-primary);\x0a\x20\x20\x20\x20\x20\x20border-color:\x20var(--border-color-hover);\x20transform:\x20translateY(-2px);\x20\x0a\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x208px\x20var(--shadow-color);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.button:active\x20{\x20\x0a\x20\x20\x20\x20\x20\x20transform:\x20translateY(0px)\x20scale(0.98);\x20box-shadow:\x20none;\x20\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.client-buttons-container\x20{\x20\x0a\x20\x20\x20\x20\x20\x20display:\x20flex;\x20flex-direction:\x20column;\x20gap:\x2016px;\x20margin-top:\x2016px;\x20\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.client-buttons-container\x20h3\x20{\x20\x0a\x20\x20\x20\x20\x20\x20font-family:\x20var(--serif);\x20font-size:\x2014px;\x20color:\x20var(--text-secondary);\x20\x0a\x20\x20\x20\x20\x20\x20margin:\x208px\x200\x20-8px\x200;\x20font-weight:\x20400;\x20text-align:\x20center;\x20\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.client-buttons\x20{\x20\x0a\x20\x20\x20\x20\x20\x20display:\x20grid;\x20grid-template-columns:\x20repeat(auto-fill,\x20minmax(220px,\x201fr));\x20gap:\x2012px;\x20\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.client-btn\x20{\x0a\x20\x20\x20\x20\x20\x20width:\x20100%;\x20background-color:\x20var(--accent-primary);\x20color:\x20var(--background-tertiary);\x0a\x20\x20\x20\x20\x20\x20border-radius:\x206px;\x20border-color:\x20var(--accent-primary-darker);\x20position:\x20relative;\x20overflow:\x20hidden;\x0a\x20\x20\x20\x20\x20\x20transition:\x20all\x200.3s\x20cubic-bezier(0.2,\x200.8,\x200.2,\x201);\x20box-shadow:\x200\x202px\x205px\x20rgba(0,\x200,\x200,\x200.15);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.client-btn:hover\x20{\x0a\x20\x20\x20\x20\x20\x20text-transform:\x20uppercase;\x20letter-spacing:\x200.3px;\x20transform:\x20translateY(-3px);\x0a\x20\x20\x20\x20\x20\x20background-color:\x20var(--accent-secondary);\x20color:\x20var(--button-text-primary);\x0a\x20\x20\x20\x20\x20\x20box-shadow:\x200\x205px\x2015px\x20rgba(190,\x20155,\x20123,\x200.5);\x20border-color:\x20var(--accent-secondary);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.client-btn:active\x20{\x20\x0a\x20\x20\x20\x20\x20\x20transform:\x20translateY(0)\x20scale(0.98);\x20box-shadow:\x200\x202px\x203px\x20rgba(0,\x200,\x200,\x200.2);\x20\x0a\x20\x20\x20\x20\x20\x20background-color:\x20var(--accent-primary-darker);\x20\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.qr-container\x20{\x0a\x20\x20\x20\x20\x20\x20display:\x20none;\x20text-align:\x20center;\x20margin-top:\x2010px;\x20background:\x20white;\x20\x0a\x20\x20\x20\x20\x20\x20padding:\x2010px;\x20border-radius:\x208px;\x20max-width:\x20276px;\x20margin-left:\x20auto;\x20margin-right:\x20auto;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.footer\x20{\x20\x0a\x20\x20\x20\x20\x20\x20text-align:\x20center;\x20margin-top:\x2020px;\x20margin-bottom:\x2040px;\x20\x0a\x20\x20\x20\x20\x20\x20color:\x20var(--text-secondary);\x20font-size:\x2012px;\x20\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.footer\x20p\x20{\x20margin-bottom:\x200px;\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.network-info-wrapper\x20{\x0a\x20\x20\x20\x20\x20\x20background:\x20var(--background-secondary);\x20border-radius:\x20var(--border-radius);\x0a\x20\x20\x20\x20\x20\x20padding:\x2024px;\x20margin-bottom:\x2024px;\x20border:\x201px\x20solid\x20var(--border-color);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.network-info-header\x20{\x0a\x20\x20\x20\x20\x20\x20display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20margin-bottom:\x2020px;\x20padding-bottom:\x2016px;\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.network-info-header\x20h2\x20{\x20\x0a\x20\x20\x20\x20\x20\x20margin:\x200;\x20font-size:\x201.4rem;\x20font-family:\x20var(--serif);\x20color:\x20var(--accent-secondary);\x20\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.network-grid\x20{\x0a\x20\x20\x20\x20\x20\x20display:\x20grid;\x20grid-template-columns:\x20repeat(auto-fit,\x20minmax(300px,\x201fr));\x20gap:\x2020px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.network-card\x20{\x0a\x20\x20\x20\x20\x20\x20background:\x20#2f2a26;\x20border:\x201px\x20solid\x20var(--border-color);\x0a\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x20padding:\x2016px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.network-title\x20{\x0a\x20\x20\x20\x20\x20\x20font-size:\x201.1em;\x20margin-top:\x200;\x20margin-bottom:\x2012px;\x0a\x20\x20\x20\x20\x20\x20border-bottom:\x201px\x20solid\x20var(--border-color);\x20padding-bottom:\x208px;\x0a\x20\x20\x20\x20\x20\x20color:\x20var(--accent-secondary);\x20font-family:\x20var(--serif);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.network-info-grid\x20{\x20display:\x20grid;\x20gap:\x208px;\x20font-size:\x200.9em;\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.network-info-grid\x20strong\x20{\x0a\x20\x20\x20\x20\x20\x20color:\x20var(--text-secondary);\x20font-weight:\x20400;\x20display:\x20inline-block;\x20min-width:\x2090px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.network-info-grid\x20span\x20{\x20color:\x20var(--text-primary);\x20font-weight:\x20500;\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.skeleton\x20{\x0a\x20\x20\x20\x20\x20\x20display:\x20inline-block;\x20width:\x20120px;\x20height:\x201em;\x0a\x20\x20\x20\x20\x20\x20background-color:\x20var(--background-tertiary);\x20border-radius:\x204px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20@keyframes\x20loading\x20{\x0a\x20\x20\x20\x20\x20\x200%\x20{\x20background-position:\x20200%\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20100%\x20{\x20background-position:\x20-200%\x200;\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20@media\x20(max-width:\x20768px)\x20{\x0a\x20\x20\x20\x20\x20\x20body\x20{\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20.container\x20{\x20padding:\x200\x2014px;\x20width:\x20min(100%,\x20768px);\x20}\x0a\x20\x20\x20\x20\x20\x20.network-grid\x20{\x20grid-template-columns:\x20repeat(auto-fit,\x20minmax(170px,\x201fr));\x20gap:\x2018px;\x20}\x0a\x20\x20\x20\x20\x20\x20.header\x20h1\x20{\x20font-size:\x201.8rem;\x20}\x0a\x20\x20\x20\x20\x20\x20.header\x20p\x20{\x20font-size:\x200.7rem;\x20}\x0a\x20\x20\x20\x20\x20\x20.network-card\x20{\x20padding:\x2014px;\x20gap:\x2018px;\x20}\x0a\x20\x20\x20\x20\x20\x20.network-title\x20{\x20font-size:\x2016px;\x20}\x0a\x20\x20\x20\x20\x20\x20.client-buttons\x20{\x20grid-template-columns:\x20repeat(auto-fill,\x20minmax(200px,\x201fr));\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20@media\x20(max-width:\x20480px)\x20{\x0a\x20\x20\x20\x20\x20\x20body\x20{\x20padding:\x2016px;\x20}\x0a\x20\x20\x20\x20\x20\x20.container\x20{\x20padding:\x200\x2012px;\x20width:\x20min(100%,\x20390px);\x20}\x0a\x20\x20\x20\x20\x20\x20.header\x20h1\x20{\x20font-size:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20.header\x20p\x20{\x20font-size:\x208px;\x20}\x0a\x20\x20\x20\x20\x20\x20.network-card\x20{\x20padding:\x2014px;\x20gap:\x2016px;\x20}\x0a\x20\x20\x20\x20\x20\x20.network-grid\x20{\x20grid-template-columns:\x20repeat(auto-fit,\x20minmax(200px,\x201fr));\x20gap:\x2016px;\x20}\x0a\x20\x20\x20\x20\x20\x20.network-title\x20{\x20font-size:\x2014px;\x20}\x0a\x20\x20\x20\x20\x20\x20.client-buttons\x20{\x20grid-template-columns:\x20repeat(auto-fill,\x20minmax(100%,\x201fr));\x20}\x0a\x20\x20\x20\x20\x20\x20.button\x20{\x20padding:\x204px\x208px;\x20font-size:\x2011px;\x20}\x0a\x20\x20\x20\x20\x20\x20.footer\x20{\x20font-size:\x2010px;\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20';}function getPageHTML(a,b,c,d,e){return'\x0a\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h1>VLESS\x20Proxy\x20Configuration</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Copy\x20the\x20configuration\x20or\x20import\x20directly\x20into\x20your\x20client</p>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22network-info-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22network-info-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Network\x20Information</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22button\x22\x20id=\x22refresh-network-btn\x22>Refresh</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22network-grid\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22network-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22network-title\x22>Proxy\x20Server</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22network-info-grid\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><strong>Proxy\x20Host:</strong>\x20<span\x20id=\x22proxy-host\x22><span\x20class=\x22skeleton\x22></span></span></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><strong>IP\x20Address:</strong>\x20<span\x20id=\x22proxy-ip\x22><span\x20class=\x22skeleton\x22></span></span></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><strong>Location:</strong>\x20<span\x20id=\x22proxy-location\x22><span\x20class=\x22skeleton\x22></span></span></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><strong>ISP:</strong>\x20<span\x20id=\x22proxy-isp\x22><span\x20class=\x22skeleton\x22></span></span></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22network-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22network-title\x22>Your\x20Connection</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22network-info-grid\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><strong>Your\x20IP:</strong>\x20<span\x20id=\x22client-ip\x22><span\x20class=\x22skeleton\x22></span></span></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><strong>Location:</strong>\x20<span\x20id=\x22client-location\x22><span\x20class=\x22skeleton\x22></span></span></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><strong>ISP:</strong>\x20<span\x20id=\x22client-isp\x22><span\x20class=\x22skeleton\x22></span></span></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><strong>Risk\x20Score:</strong>\x20<span\x20id=\x22client-risk\x22><span\x20class=\x22skeleton\x22></span></span></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20\x20\x20'+d+'\x0a\x20\x20\x20\x20\x20\x20'+e+'\x0a\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22config-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22config-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Xray\x20Subscription</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22copy-xray-sub-btn\x22\x20class=\x22button\x22\x20data-clipboard-text=\x22'+b+'\x22>Copy\x20Link</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22client-buttons-container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Android</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22client-buttons\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22'+a['universalAndroid']+'\x22\x20class=\x22button\x20client-btn\x22>Universal\x20Import\x20(V2rayNG)</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22'+a['karing']+'\x22\x20class=\x22button\x20client-btn\x22>Import\x20to\x20Karing</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>iOS</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22client-buttons\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22'+a['shadowrocket']+'\x22\x20class=\x22button\x20client-btn\x22>Import\x20to\x20Shadowrocket</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22'+a['stash']+'\x22\x20class=\x22button\x20client-btn\x22>Import\x20to\x20Stash</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22'+a['streisand']+'\x22\x20class=\x22button\x20client-btn\x22>Import\x20to\x20Streisand</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Desktop\x20/\x20Other</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22client-buttons\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22button\x20client-btn\x22\x20onclick=\x22toggleQR(\x27xray\x27,\x20\x27'+b+'\x27)\x22>Show\x20QR\x20Code</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22qr-xray-container\x22\x20class=\x22qr-container\x22><div\x20id=\x22qr-xray\x22></div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22config-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22config-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Sing-Box\x20/\x20Clash\x20Subscription</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22copy-sb-sub-btn\x22\x20class=\x22button\x22\x20data-clipboard-text=\x22'+c+'\x22>Copy\x20Link</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22client-buttons-container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Android\x20/\x20Windows\x20/\x20macOS</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22client-buttons\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22'+a['clashMeta']+'\x22\x20class=\x22button\x20client-btn\x22>Import\x20to\x20Clash\x20Meta\x20/\x20Stash</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Desktop\x20/\x20Other</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22client-buttons\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22button\x20client-btn\x22\x20onclick=\x22toggleQR(\x27singbox\x27,\x20\x27'+c+'\x27)\x22>Show\x20QR\x20Code</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22qr-singbox-container\x22\x20class=\x22qr-container\x22><div\x20id=\x22qr-singbox\x22></div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>©\x20'+new Date()['getFullYear']()+'\x20REvil\x20-\x20All\x20Rights\x20Reserved</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Secure.\x20Private.\x20Fast.</p>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20';}function getPageScript(){return'\x0a\x20\x20\x20\x20function\x20copyToClipboard(button,\x20text)\x20{\x0a\x20\x20\x20\x20\x20\x20const\x20originalText\x20=\x20button.textContent;\x0a\x20\x20\x20\x20\x20\x20navigator.clipboard.writeText(text).then(()\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20button.textContent\x20=\x20\x27Copied!\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20setTimeout(()\x20=>\x20{\x20button.textContent\x20=\x20originalText;\x20},\x201500);\x0a\x20\x20\x20\x20\x20\x20}).catch(err\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20console.error(\x27Failed\x20to\x20copy:\x27,\x20err);\x0a\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20function\x20toggleQR(id,\x20url)\x20{\x0a\x20\x20\x20\x20\x20\x20const\x20container\x20=\x20document.getElementById(\x27qr-\x27\x20+\x20id\x20+\x20\x27-container\x27);\x0a\x20\x20\x20\x20\x20\x20const\x20qrElement\x20=\x20document.getElementById(\x27qr-\x27\x20+\x20id);\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20if\x20(container.style.display\x20===\x20\x27none\x27\x20||\x20container.style.display\x20===\x20\x27\x27)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20container.style.display\x20=\x20\x27block\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20if\x20(!qrElement.hasChildNodes())\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20new\x20QRCode(qrElement,\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text:\x20url,\x20width:\x20256,\x20height:\x20256,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20colorDark:\x20\x22#2a2421\x22,\x20colorLight:\x20\x22#e5dfd6\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20correctLevel:\x20QRCode.CorrectLevel.H\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20container.style.display\x20=\x20\x27none\x27;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20function\x20displayExpirationTimes()\x20{\x0a\x20\x20\x20\x20\x20\x20const\x20expElement\x20=\x20document.getElementById(\x27expiration-display\x27);\x0a\x20\x20\x20\x20\x20\x20const\x20relativeElement\x20=\x20document.getElementById(\x27expiration-relative\x27);\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20if\x20(!expElement\x20||\x20!expElement.dataset.utcTime)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20if\x20(expElement)\x20expElement.textContent\x20=\x20\x27Expiration\x20time\x20not\x20available\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20if\x20(relativeElement)\x20relativeElement.style.display\x20=\x20\x27none\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20return;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20const\x20utcDate\x20=\x20new\x20Date(expElement.dataset.utcTime);\x0a\x20\x20\x20\x20\x20\x20if\x20(isNaN(utcDate.getTime()))\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20expElement.textContent\x20=\x20\x27Invalid\x20expiration\x20time\x20format\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20if\x20(relativeElement)\x20relativeElement.style.display\x20=\x20\x27none\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20return;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20const\x20now\x20=\x20new\x20Date();\x0a\x20\x20\x20\x20\x20\x20const\x20diffSeconds\x20=\x20(utcDate.getTime()\x20-\x20now.getTime())\x20/\x201000;\x0a\x20\x20\x20\x20\x20\x20const\x20isExpired\x20=\x20diffSeconds\x20<\x200;\x0a\x0a\x20\x20\x20\x20\x20\x20const\x20rtf\x20=\x20new\x20Intl.RelativeTimeFormat(\x27en\x27,\x20{\x20numeric:\x20\x27auto\x27\x20});\x0a\x20\x20\x20\x20\x20\x20let\x20relTime\x20=\x20\x27\x27;\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20if\x20(Math.abs(diffSeconds)\x20<\x2060)\x20relTime\x20=\x20rtf.format(Math.round(diffSeconds),\x20\x27second\x27);\x0a\x20\x20\x20\x20\x20\x20else\x20if\x20(Math.abs(diffSeconds)\x20<\x203600)\x20relTime\x20=\x20rtf.format(Math.round(diffSeconds\x20/\x2060),\x20\x27minute\x27);\x0a\x20\x20\x20\x20\x20\x20else\x20if\x20(Math.abs(diffSeconds)\x20<\x2086400)\x20relTime\x20=\x20rtf.format(Math.round(diffSeconds\x20/\x203600),\x20\x27hour\x27);\x0a\x20\x20\x20\x20\x20\x20else\x20relTime\x20=\x20rtf.format(Math.round(diffSeconds\x20/\x2086400),\x20\x27day\x27);\x0a\x0a\x20\x20\x20\x20\x20\x20if\x20(relativeElement)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20relativeElement.textContent\x20=\x20isExpired\x20?\x20`Expired\x20${relTime}`\x20:\x20`Expires\x20${relTime}`;\x0a\x20\x20\x20\x20\x20\x20\x20\x20relativeElement.classList.add(isExpired\x20?\x20\x27expired\x27\x20:\x20\x27active\x27);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20const\x20commonOptions\x20=\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20year:\x20\x27numeric\x27,\x20month:\x20\x27long\x27,\x20day:\x20\x27numeric\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20hour:\x20\x272-digit\x27,\x20minute:\x20\x272-digit\x27,\x20second:\x20\x272-digit\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20hour12:\x20true,\x20timeZoneName:\x20\x27short\x27\x0a\x20\x20\x20\x20\x20\x20};\x0a\x0a\x20\x20\x20\x20\x20\x20const\x20localTime\x20=\x20utcDate.toLocaleString(undefined,\x20commonOptions);\x0a\x20\x20\x20\x20\x20\x20const\x20tehranTime\x20=\x20utcDate.toLocaleString(\x27en-US\x27,\x20{\x20...commonOptions,\x20timeZone:\x20\x27Asia/Tehran\x27\x20});\x0a\x20\x20\x20\x20\x20\x20const\x20utcTime\x20=\x20utcDate.toISOString().replace(\x27T\x27,\x20\x27\x20\x27).substring(0,\x2019)\x20+\x20\x27\x20UTC\x27;\x0a\x0a\x20\x20\x20\x20\x20\x20expElement.innerHTML\x20=\x20`\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span><strong>Your\x20Local\x20Time:</strong>\x20${localTime}</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span><strong>Tehran\x20Time:</strong>\x20${tehranTime}</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span><strong>Universal\x20Time:</strong>\x20${utcTime}</span>\x0a\x20\x20\x20\x20\x20\x20`;\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20async\x20function\x20fetchClientIP()\x20{\x0a\x20\x20\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20const\x20response\x20=\x20await\x20fetch(\x27https://api.ipify.org?format=json\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20(await\x20response.json()).ip;\x0a\x20\x20\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20console.error(\x27Error\x20fetching\x20client\x20IP:\x27,\x20error);\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20null;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20async\x20function\x20fetchScamalyticsInfo(clientIp)\x20{\x0a\x20\x20\x20\x20\x20\x20if\x20(!clientIp)\x20return\x20null;\x0a\x20\x20\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20const\x20response\x20=\x20await\x20fetch(`/scamalytics-lookup?ip=${encodeURIComponent(clientIp)}`);\x0a\x20\x20\x20\x20\x20\x20\x20\x20if\x20(!response.ok)\x20return\x20null;\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20await\x20response.json();\x0a\x20\x20\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20console.error(\x27Error\x20fetching\x20Scamalytics\x20data:\x27,\x20error);\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20null;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20async\x20function\x20fetchIpApiInfo(ip)\x20{\x0a\x20\x20\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20const\x20response\x20=\x20await\x20fetch(`https://ip-api.io/json/${ip}`);\x0a\x20\x20\x20\x20\x20\x20\x20\x20if\x20(!response.ok)\x20return\x20null;\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20await\x20response.json();\x0a\x20\x20\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20console.error(\x27IP\x20API\x20Error:\x27,\x20error);\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20null;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20async\x20function\x20loadNetworkInfo()\x20{\x0a\x20\x20\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20const\x20proxyIpWithPort\x20=\x20document.body.getAttribute(\x27data-proxy-ip\x27)\x20||\x20\x22N/A\x22;\x0a\x20\x20\x20\x20\x20\x20\x20\x20const\x20proxyDomain\x20=\x20proxyIpWithPort.split(\x27:\x27)[0];\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27proxy-host\x27).textContent\x20=\x20proxyIpWithPort;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20if\x20(proxyDomain\x20&&\x20proxyDomain\x20!==\x20\x22N/A\x22)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20let\x20resolvedIp\x20=\x20proxyDomain;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(!/^\x5cd{1,3}\x5c.\x5cd{1,3}\x5c.\x5cd{1,3}\x5c.\x5cd{1,3}$/.test(proxyDomain))\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20dnsRes\x20=\x20await\x20fetch(`https://dns.google/resolve?name=${encodeURIComponent(proxyDomain)}&type=A`);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(dnsRes.ok)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20dnsData\x20=\x20await\x20dnsRes.json();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20ipAnswer\x20=\x20dnsData.Answer?.find(a\x20=>\x20a.type\x20===\x201);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(ipAnswer)\x20resolvedIp\x20=\x20ipAnswer.data;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20catch\x20(e)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20console.error(\x27DNS\x20resolution\x20failed:\x27,\x20e);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20proxyGeo\x20=\x20await\x20fetchIpApiInfo(resolvedIp);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(proxyGeo)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27proxy-ip\x27).textContent\x20=\x20proxyGeo.ip\x20||\x20\x27N/A\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27proxy-location\x27).textContent\x20=\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[proxyGeo.city,\x20proxyGeo.country_name].filter(Boolean).join(\x27,\x20\x27)\x20||\x20\x27N/A\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27proxy-isp\x27).textContent\x20=\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20proxyGeo.isp\x20||\x20proxyGeo.organisation\x20||\x20\x27N/A\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20const\x20clientIp\x20=\x20await\x20fetchClientIP();\x0a\x20\x20\x20\x20\x20\x20\x20\x20if\x20(clientIp)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27client-ip\x27).textContent\x20=\x20clientIp;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20scamalyticsData\x20=\x20await\x20fetchScamalyticsInfo(clientIp);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(scamalyticsData?.scamalytics?.status\x20===\x20\x27ok\x27)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20sa\x20=\x20scamalyticsData.scamalytics;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20dbip\x20=\x20scamalyticsData.external_datasources?.dbip;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27client-location\x27).textContent\x20=\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20[dbip?.ip_city,\x20dbip?.ip_country_name].filter(Boolean).join(\x27,\x20\x27)\x20||\x20\x27N/A\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27client-isp\x27).textContent\x20=\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20sa.scamalytics_isp\x20||\x20dbip?.isp_name\x20||\x20\x27N/A\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20riskText\x20=\x20sa.scamalytics_score\x20!==\x20undefined\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20?\x20`${sa.scamalytics_score}\x20-\x20${sa.scamalytics_risk}`\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20:\x20\x27N/A\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20document.getElementById(\x27client-risk\x27).textContent\x20=\x20riskText;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20console.error(\x27Network\x20info\x20loading\x20failed:\x27,\x20error);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20document.addEventListener(\x27DOMContentLoaded\x27,\x20()\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20displayExpirationTimes();\x0a\x20\x20\x20\x20\x20\x20loadNetworkInfo();\x0a\x0a\x20\x20\x20\x20\x20\x20document.querySelectorAll(\x27.button[data-clipboard-text]\x27).forEach(button\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20button.addEventListener(\x27click\x27,\x20()\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20copyToClipboard(button,\x20button.dataset.clipboardText);\x0a\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20});\x0a\x0a\x20\x20\x20\x20\x20\x20document.getElementById(\x27refresh-network-btn\x27)?.addEventListener(\x27click\x27,\x20()\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20document.querySelectorAll(\x27.network-info-grid\x20span\x27).forEach(el\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20el.innerHTML\x20=\x20\x27<span\x20class=\x22skeleton\x22></span>\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20loadNetworkInfo();\x0a\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20});\x0a\x20\x20';}export default{async 'fetch'(a,b,c){const d=Config['fromEnv'](b),f=new URL(a['url']);if(f['pathname']['startsWith']('/admin'))return handleAdminRequest(a,b,c);const g=a['headers']['get']('Upgrade');if(g?.['toLowerCase']()==='websocket'){if(!b['DB']||!b['USER_KV'])return new Response('Service\x20not\x20configured\x20properly',{'status':0x1f7});const j={'userID':d['userID'],'proxyIP':d['proxyIP'],'proxyPort':d['proxyPort'],'socks5Address':d['socks5']['address'],'socks5Relay':d['socks5']['relayMode'],'enableSocks':d['socks5']['enabled'],'parsedSocks5Address':d['socks5']['enabled']?socks5AddressParser(d['socks5']['address']):{}};return await ProtocolOverWSHandler(a,j,b,c);}if(f['pathname']==='/scamalytics-lookup')return handleScamalyticsLookup(a,d);const h=async k=>{const l=f['pathname']['slice'](('/'+k+'/')['length']);if(!isValidUUID(l))return new Response('Invalid\x20UUID',{'status':0x190});const m=await getUserData(b,l,c);if(!m)return new Response('Invalid\x20user',{'status':0x193});if(isExpired(m['expiration_date'],m['expiration_time']))return new Response('User\x20expired',{'status':0x193});if(m['traffic_limit']&&m['traffic_limit']>0x0&&m['traffic_used']>=m['traffic_limit'])return new Response('Data\x20limit\x20reached',{'status':0x193});return handleIpSubscription(k,l,f['hostname']);};if(f['pathname']['startsWith']('/xray/'))return h('xray');if(f['pathname']['startsWith']('/sb/'))return h('sb');const i=f['pathname']['slice'](0x1);if(isValidUUID(i)){const k=await getUserData(b,i,c);if(!k)return new Response('Invalid\x20user',{'status':0x193});return handleConfigPage(i,f['hostname'],d['proxyAddress'],k);}if(b['ROOT_PROXY_URL'])try{const l=new URL(b['ROOT_PROXY_URL']),m=new URL(a['url']);m['hostname']=l['hostname'],m['protocol']=l['protocol'],m['port']=l['port'];const n=new Request(m,a);n['headers']['set']('Host',l['hostname']),n['headers']['set']('X-Forwarded-For',a['headers']['get']('CF-Connecting-IP')),n['headers']['set']('X-Forwarded-Proto','https');const o=await fetch(n),p=new Headers(o['headers']);return p['delete']('Content-Security-Policy'),p['delete']('Content-Security-Policy-Report-Only'),p['delete']('X-Frame-Options'),new Response(o['body'],{'status':o['status'],'statusText':o['statusText'],'headers':p});}catch(q){return console['error']('Reverse\x20Proxy\x20Error:\x20'+q['message']),new Response('Proxy\x20configuration\x20error:\x20'+q['message'],{'status':0x1f6});}return new Response('Not\x20found',{'status':0x194});}};